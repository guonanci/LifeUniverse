å¥½çš„ï¼Œæˆ‘ç°åœ¨éœ€è¦ä¸ºç”¨æˆ·æä¾›TypeScripté¢è¯•é¢˜åŠå…¶ç­”æ¡ˆçš„åˆ—è¡¨ã€‚ç”¨æˆ·ä¹‹å‰å·²ç»è¯¢é—®è¿‡æ•°æ®å¤§å±å‰ç«¯é¢è¯•é¢˜å’ŒTypeScripté¢è¯•é¢˜ï¼Œç°åœ¨ä»–ä»¬å¯èƒ½å¸Œæœ›å¾—åˆ°æ›´å…·ä½“çš„é—®é¢˜å’Œå¯¹åº”çš„ç­”æ¡ˆï¼Œä»¥ä¾¿æ›´å¥½åœ°å‡†å¤‡é¢è¯•ã€‚

é¦–å…ˆï¼Œæˆ‘è¦å›é¡¾ä¹‹å‰çš„å›ç­”ï¼Œç¡®ä¿è¿™æ¬¡çš„å†…å®¹ä¸é‡å¤ï¼ŒåŒæ—¶è¡¥å……æ›´å¤šç»†èŠ‚å’Œå®é™…ä¾‹å­ã€‚ç”¨æˆ·å¯èƒ½éœ€è¦çš„æ˜¯ç›´æ¥å¯ä»¥ç”¨äºé¢è¯•å‡†å¤‡çš„ææ–™ï¼Œæ‰€ä»¥é—®é¢˜éœ€è¦è¦†ç›–åŸºç¡€åˆ°è¿›é˜¶ï¼Œå¹¶ä¸”ç­”æ¡ˆè¦ç®€æ´æ˜ç¡®ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘éœ€è¦æ•´ç†å¸¸è§çš„TypeScripté¢è¯•é¢˜ï¼Œè¦†ç›–åŸºæœ¬æ¦‚å¿µã€ç±»å‹ç³»ç»Ÿã€æ³›å‹ã€å·¥å…·ç±»å‹ã€ç±»ä¸è£…é¥°å™¨ã€å·¥ç¨‹åŒ–åº”ç”¨ä»¥åŠå®æˆ˜åœºæ™¯ã€‚æ¯ä¸ªé—®é¢˜éœ€è¦é™„ä¸Šæ¸…æ™°æ˜“æ‡‚çš„ç­”æ¡ˆï¼Œå¯èƒ½è¿˜éœ€è¦ä»£ç ç¤ºä¾‹æ¥è¯´æ˜ã€‚

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç­”æ¡ˆä¸ä»…è¦æ­£ç¡®ï¼Œè¿˜è¦è§£é‡Šæ¸…æ¥šèƒŒåçš„åŸç†ï¼Œä¾‹å¦‚è§£é‡Šinterfaceå’Œtypeçš„åŒºåˆ«æ—¶ï¼Œè¦æåˆ°å£°æ˜åˆå¹¶å’Œç±»å‹å®šä¹‰çš„é™åˆ¶ã€‚å¯¹äºæ³›å‹çš„é—®é¢˜ï¼Œè¦ç»™å‡ºå®é™…çš„ä»£ç ä¾‹å­ï¼Œå¹¶è¯´æ˜å¦‚ä½•åº”ç”¨ã€‚

æ­¤å¤–ï¼Œç”¨æˆ·å¯èƒ½å¯¹é«˜çº§ç±»å‹å’Œå·¥å…·ç±»å‹æ„Ÿå…´è¶£ï¼Œæ¯”å¦‚æ¡ä»¶ç±»å‹ã€æ˜ å°„ç±»å‹ï¼Œä»¥åŠå¦‚ä½•è‡ªå®šä¹‰å·¥å…·ç±»å‹ã€‚å› æ­¤ï¼Œæˆ‘éœ€è¦åŒ…æ‹¬ä¸€äº›é«˜çº§é—®é¢˜ï¼Œä¾‹å¦‚å®ç°DeepReadonlyæˆ–å¤„ç†å¤æ‚çš„ç±»å‹è½¬æ¢ã€‚

è¿˜è¦è€ƒè™‘å·¥ç¨‹åŒ–æ–¹é¢çš„é—®é¢˜ï¼Œæ¯”å¦‚tsconfig.jsonçš„é…ç½®ï¼Œæ¨¡å—åŒ–ï¼Œä»¥åŠå¦‚ä½•ä¸ºç¬¬ä¸‰æ–¹åº“ç¼–å†™å£°æ˜æ–‡ä»¶ã€‚è¿™äº›é—®é¢˜èƒ½å±•ç¤ºå€™é€‰äººåœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨TypeScriptçš„ç»éªŒã€‚

æœ€åï¼Œå¼€æ”¾æ€§é—®é¢˜å¦‚é¡¹ç›®è¿ç§»ã€è®¾è®¡æ¨¡å¼çš„åº”ç”¨ï¼Œä»¥åŠæ€§èƒ½ä¼˜åŒ–ï¼Œè¿™äº›èƒ½ä½“ç°å€™é€‰äººçš„ç»¼åˆèƒ½åŠ›å’Œå®æˆ˜ç»éªŒã€‚éœ€è¦ç»™å‡ºå»ºè®®æ€§çš„ç­”æ¡ˆï¼Œè¯´æ˜è§£å†³æ€è·¯å’Œæœ€ä½³å®è·µã€‚

åœ¨æ•´ç†è¿‡ç¨‹ä¸­ï¼Œè¦ç¡®ä¿é—®é¢˜åˆ†ç±»æ¸…æ™°ï¼Œç»“æ„åˆç†ï¼Œç­”æ¡ˆå‡†ç¡®ä¸”æœ‰æ·±åº¦ï¼Œå¸®åŠ©ç”¨æˆ·å…¨é¢å‡†å¤‡TypeScriptç›¸å…³çš„é¢è¯•ã€‚




ä»¥ä¸‹æ˜¯å¸¸è§çš„ TypeScript é¢è¯•é¢˜åŠå…¶ç­”æ¡ˆæ•´ç†ï¼Œæ¶µç›–åŸºç¡€åˆ°é«˜çº§çŸ¥è¯†ç‚¹ï¼ŒåŠ©ä½ é«˜æ•ˆå¤‡æˆ˜ï¼š

---

### **ä¸€ã€åŸºç¡€æ¦‚å¿µä¸ç±»å‹ç³»ç»Ÿ**
#### 1. **TypeScript å’Œ JavaScript çš„æ ¸å¿ƒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ**
**ç­”æ¡ˆ**ï¼š
â€¢ TypeScript æ˜¯ JavaScript çš„è¶…é›†ï¼Œæ·»åŠ äº†**é™æ€ç±»å‹ç³»ç»Ÿ**ï¼Œæ”¯æŒç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯ã€‚
â€¢ æä¾›**æ¥å£ã€æ³›å‹ã€æšä¸¾ã€è£…é¥°å™¨**ç­‰é«˜çº§ç‰¹æ€§ï¼Œæå‡ä»£ç å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§ã€‚
â€¢ éœ€é€šè¿‡ç¼–è¯‘å™¨ï¼ˆå¦‚ `tsc`ï¼‰å°† TypeScript è½¬æ¢ä¸º JavaScript æ‰èƒ½åœ¨æµè§ˆå™¨æˆ– Node.js ä¸­è¿è¡Œã€‚

---

#### 2. **`any`ã€`unknown` å’Œ `never` çš„åŒºåˆ«ï¼Ÿ**
**ç­”æ¡ˆ**ï¼š
â€¢ **`any`**ï¼šç¦ç”¨ç±»å‹æ£€æŸ¥ï¼Œå…è®¸ä»»æ„æ“ä½œï¼ˆå¦‚è°ƒç”¨ä¸å­˜åœ¨çš„æ–¹æ³•ï¼‰ï¼Œæ…ç”¨ã€‚
â€¢ **`unknown`**ï¼šè¡¨ç¤ºâ€œæœªçŸ¥ç±»å‹â€ï¼Œéœ€é€šè¿‡ç±»å‹æ–­è¨€æˆ–ç±»å‹å®ˆå«ï¼ˆType Guardï¼‰åæ‰èƒ½æ“ä½œï¼Œæ›´å®‰å…¨ã€‚
â€¢ **`never`**ï¼šè¡¨ç¤ºæ°¸è¿œä¸ä¼šå‘ç”Ÿçš„å€¼ï¼ˆå¦‚æŠ›å‡ºé”™è¯¯çš„å‡½æ•°è¿”å›å€¼ï¼‰ã€‚

**ç¤ºä¾‹**ï¼š
```typescript
let a: any = "hello";
a.toFixed(); // ç¼–è¯‘é€šè¿‡ï¼Œä½†è¿è¡Œæ—¶æŠ¥é”™ï¼

let b: unknown = "world";
if (typeof b === "string") {
  console.log(b.length); // å¿…é¡»é€šè¿‡ç±»å‹å®ˆå«
}

function error(): never {
  throw new Error("error");
}
```

---

### **äºŒã€æ¥å£ã€ç±»å‹åˆ«åä¸é«˜çº§ç±»å‹**
#### 3. **`interface` å’Œ `type` çš„åŒºåˆ«ï¼Ÿ**
**ç­”æ¡ˆ**ï¼š
â€¢ **ç›¸åŒç‚¹**ï¼šå‡å¯å®šä¹‰å¯¹è±¡ã€å‡½æ•°ã€è”åˆç±»å‹ç­‰ã€‚
â€¢ **ä¸åŒç‚¹**ï¼š
  â€¢ **`interface`**ï¼š
    â—¦ æ”¯æŒ**å£°æ˜åˆå¹¶**ï¼ˆå¤šæ¬¡å®šä¹‰åŒä¸€æ¥å£ä¼šåˆå¹¶ï¼‰ã€‚
    â—¦ æ›´é€‚åˆæè¿°å¯¹è±¡å½¢çŠ¶ï¼ˆå¦‚ç±»å®ç°æ¥å£ï¼‰ã€‚
  â€¢ **`type`**ï¼š
    â—¦ å¯å®šä¹‰æ›´å¤æ‚ç±»å‹ï¼ˆå¦‚å…ƒç»„ã€å­—é¢é‡è”åˆç±»å‹ `'A' | 'B'`ï¼‰ã€‚
    â—¦ ä¸å¯é‡å¤å£°æ˜ã€‚

**ç¤ºä¾‹**ï¼š
```typescript
// æ¥å£åˆå¹¶
interface User { name: string; }
interface User { age: number; }
const user: User = { name: "Alice", age: 20 };

// ç±»å‹åˆ«å
type Status = "success" | "error";
```

---

#### 4. **å¦‚ä½•å®ç°ä¸€ä¸ª `DeepReadonly<T>` å·¥å…·ç±»å‹ï¼Ÿ**
**ç­”æ¡ˆ**ï¼š
é€’å½’åœ°å°†æ‰€æœ‰å±æ€§ï¼ˆåŒ…æ‹¬åµŒå¥—å¯¹è±¡ï¼‰è®¾ç½®ä¸º `readonly`ã€‚
```typescript
type DeepReadonly<T> = {
  readonly [K in keyof T]: T[K] extends object ? DeepReadonly<T[K]> : T[K];
};

// æµ‹è¯•
type User = {
  name: string;
  address: { city: string };
};
type ReadonlyUser = DeepReadonly<User>;
// ç»“æœï¼šaddress ä¹Ÿæ˜¯ readonly
```

---

### **ä¸‰ã€æ³›å‹ä¸å·¥å…·ç±»å‹**
#### 5. **æ³›å‹çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿå†™ä¸€ä¸ªæ³›å‹å‡½æ•°ç¤ºä¾‹**
**ç­”æ¡ˆ**ï¼š
æ³›å‹ç”¨äº**åˆ›å»ºå¯å¤ç”¨çš„ç»„ä»¶ï¼Œæ”¯æŒå¤šç§ç±»å‹è€Œä¸ä¸¢å¤±ç±»å‹ä¿¡æ¯**ã€‚

**ç¤ºä¾‹**ï¼šåè½¬æ•°ç»„
```typescript
function reverse<T>(items: T[]): T[] {
  return items.reverse();
}
const nums = reverse([1, 2, 3]); // ç±»å‹æ¨æ–­ä¸º number[]
const strs = reverse(["a", "b"]); // ç±»å‹æ¨æ–­ä¸º string[]
```

---

#### 6. **å¦‚ä½•ç”¨æ³›å‹çº¦æŸé™åˆ¶å‚æ•°å¿…é¡»åŒ…å« `length` å±æ€§ï¼Ÿ**
**ç­”æ¡ˆ**ï¼š
ä½¿ç”¨ `extends` çº¦æŸæ³›å‹å‚æ•°ã€‚
```typescript
interface HasLength {
  length: number;
}

function logLength<T extends HasLength>(obj: T): void {
  console.log(obj.length);
}

logLength("hello"); // 5
logLength({ length: 10, value: "test" }); // 10
```

---

### **å››ã€ç±»ä¸è£…é¥°å™¨**
#### 7. **æŠ½è±¡ç±»å’Œæ¥å£çš„åŒºåˆ«ï¼Ÿ**
**ç­”æ¡ˆ**ï¼š
â€¢ **æŠ½è±¡ç±»**ï¼š
  â€¢ å¯ä»¥åŒ…å«å…·ä½“æ–¹æ³•å’ŒæŠ½è±¡æ–¹æ³•ï¼ˆ`abstract` æ ‡è®°ï¼‰ã€‚
  â€¢ é€šè¿‡ `extends` ç»§æ‰¿ï¼Œä¸€ä¸ªç±»åªèƒ½ç»§æ‰¿ä¸€ä¸ªæŠ½è±¡ç±»ã€‚
â€¢ **æ¥å£**ï¼š
  â€¢ ä»…å®šä¹‰æ–¹æ³•ç­¾åå’Œå±æ€§ï¼Œæ— å…·ä½“å®ç°ã€‚
  â€¢ é€šè¿‡ `implements` å®ç°ï¼Œä¸€ä¸ªç±»å¯å®ç°å¤šä¸ªæ¥å£ã€‚

**ç¤ºä¾‹**ï¼š
```typescript
abstract class Animal {
  abstract move(): void;
  eat() { console.log("eating"); }
}

interface Flyable {
  fly(): void;
}

class Bird extends Animal implements Flyable {
  move() { console.log("flying"); }
  fly() { console.log("flapping wings"); }
}
```

---

#### 8. **å¦‚ä½•ç”¨è£…é¥°å™¨å®ç°æ–¹æ³•æ‰§è¡Œæ—¶é—´çš„æ—¥å¿—æ‰“å°ï¼Ÿ**
**ç­”æ¡ˆ**ï¼š
ä½¿ç”¨**æ–¹æ³•è£…é¥°å™¨**æ‹¦æˆªæ–¹æ³•è°ƒç”¨ï¼Œè®°å½•æ‰§è¡Œæ—¶é—´ã€‚
```typescript
function logTime(target: any, methodName: string, descriptor: PropertyDescriptor) {
  const originalMethod = descriptor.value;
  descriptor.value = function (...args: any[]) {
    const start = Date.now();
    const result = originalMethod.apply(this, args);
    const end = Date.now();
    console.log(`${methodName} æ‰§è¡Œæ—¶é—´ï¼š${end - start}ms`);
    return result;
  };
}

class Calculator {
  @logTime
  add(a: number, b: number) {
    for (let i = 0; i < 1e6; i++) {} // æ¨¡æ‹Ÿè€—æ—¶æ“ä½œ
    return a + b;
  }
}
```

---

### **äº”ã€å·¥ç¨‹åŒ–ä¸é…ç½®**
#### 9. **å¦‚ä½•ä¸ºç¬¬ä¸‰æ–¹åº“ç¼–å†™ç±»å‹å£°æ˜æ–‡ä»¶ï¼Ÿ**
**ç­”æ¡ˆ**ï¼š
åœ¨ `.d.ts` æ–‡ä»¶ä¸­ä½¿ç”¨ `declare module` æ‰©å±•ç±»å‹ã€‚

**ç¤ºä¾‹**ï¼šä¸ºæœªæä¾›ç±»å‹çš„åº“ `myLib` æ·»åŠ å£°æ˜
```typescript
// myLib.d.ts
declare module "myLib" {
  export function greet(name: string): string;
}
```

---

#### 10. **`tsconfig.json` ä¸­ `strictNullChecks` çš„ä½œç”¨ï¼Ÿ**
**ç­”æ¡ˆ**ï¼š
å¯ç”¨åï¼ˆ`true`ï¼‰ï¼ŒTypeScript ä¼šä¸¥æ ¼æ£€æŸ¥ `null` å’Œ `undefined`ï¼Œé˜²æ­¢æ„å¤–è®¿é—®å¯èƒ½ä¸º `null` çš„å€¼ã€‚

**ç¤ºä¾‹**ï¼š
```typescript
let a: number = null; // æŠ¥é”™ï¼ˆè‹¥ strictNullChecks ä¸º trueï¼‰
let b: number | null = null; // æ­£ç¡®
```

---

### **å…­ã€å®æˆ˜åœºæ™¯ä¸å¼€æ”¾é—®é¢˜**
#### 11. **å¦‚ä½•è®¾è®¡ä¸€ä¸ªç±»å‹å®‰å…¨çš„ API è¯·æ±‚å±‚ï¼Ÿ**
**ç­”æ¡ˆ**ï¼š
â€¢ ä½¿ç”¨æ³›å‹å°è£…è¯·æ±‚å‡½æ•°ï¼Œçº¦æŸè¯·æ±‚å‚æ•°å’Œå“åº”ç±»å‹ã€‚
â€¢ ç¤ºä¾‹ï¼š
```typescript
interface ApiResponse<T> {
  code: number;
  data: T;
  message: string;
}

async function request<T>(url: string, params: any): Promise<ApiResponse<T>> {
  const response = await fetch(url, { body: JSON.stringify(params) });
  return response.json();
}

// ä½¿ç”¨
interface User { id: number; name: string; }
const result = await request<User>("/api/user", { id: 1 });
```

---

#### 12. **è¿ç§» JavaScript é¡¹ç›®åˆ° TypeScript çš„å…³é”®æ­¥éª¤ï¼Ÿ**
**ç­”æ¡ˆ**ï¼š
1. é‡å‘½åæ–‡ä»¶ä¸º `.ts`ï¼Œé€æ­¥ä¿®å¤ç±»å‹é”™è¯¯ã€‚
2. é…ç½® `tsconfig.json`ï¼ˆå¦‚å¼€å¯ `allowJs` å…¼å®¹æ—§ä»£ç ï¼‰ã€‚
3. ä¸ºç¬¬ä¸‰æ–¹åº“æ·»åŠ ç±»å‹å£°æ˜ï¼ˆæˆ–å®‰è£… `@types` åŒ…ï¼‰ã€‚
4. ä¼˜å…ˆè¿ç§»æ ¸å¿ƒæ¨¡å—ï¼Œé€æ­¥è¦†ç›–å·¥å…·å‡½æ•°å’Œç»„ä»¶ã€‚

---

### **é™„ï¼šå­¦ä¹ èµ„æº**
â€¢ **å®˜æ–¹æ–‡æ¡£**ï¼š[TypeScript Handbook](https://www.typescriptlang.org/docs/handbook/)
â€¢ **ç±»å‹æŒ‘æˆ˜**ï¼š[type-challenges](https://github.com/type-challenges/type-challenges)ï¼ˆæå‡ç±»å‹ç¼–ç¨‹èƒ½åŠ›ï¼‰
â€¢ **åœ¨çº¿ç»ƒä¹ **ï¼š[TypeScript Playground](https://www.typescriptlang.org/play)ï¼ˆå®æ—¶æµ‹è¯•ç±»å‹é€»è¾‘ï¼‰

æŒæ¡è¿™äº›çŸ¥è¯†ç‚¹åï¼Œç»“åˆé¡¹ç›®ä¸­çš„å®é™…åº”ç”¨æ¡ˆä¾‹ï¼Œèƒ½å¤§å¹…æå‡é¢è¯•é€šè¿‡ç‡ï¼ ğŸš€




JS=è§£é‡Šå‹ï¼Œåªèƒ½åœ¨è¿è¡Œæ—¶å‘ç°é”™è¯¯ï¼›æ˜¯å¼±ç±»å‹è¯­è¨€ï¼Œæ²¡æœ‰é™æ€ç±»å‹é€‰é¡¹ï¼›
TS-å¯ä»¥åœ¨ç¼–è¯‘æœŸé—´å‘ç°å¹¶çº æ­£é”™è¯¯ï¼›æ˜¯å¼ºç±»å‹è¯­è¨€ï¼Œæ”¯æŒé™æ€å’ŒåŠ¨æ€ç±»å‹ã€ä»¥åŠå‡½æ•°é‡è½½ï¼›

é¡¶çº§ç±»å‹ï¼š**unknown&&any**

âŒâœ…â—ï¸

https://jkchao.github.io/typescript-book-chinese/#%E7%BF%BB%E8%AF%91%E5%86%85%E5%AE%B9
https://github.com/microsoft/TypeScript/wiki/Performance#preferring-interfaces-over-intersections

https://github.com/typescript-cheatsheets/react

No overload matches this call.

```tsx
// You may have probably heard of very useful TS types like Partial<T>, that let you produce a type derived from T, but with every property being optional.
type Partial<T> = {
  [P in keyof T]?: T[P];
};
type Required<T> = {
  [P in keyof T]-?: T[P];
};
type Readonly<T> = {
  readonly [P in keyof T]: T[P];
};
```

# æŒ‰ç…§ç±»å‹é©±åŠ¨åŸåˆ™æ¥ç¼–å†™ä»£ç ï¼ˆè®¾è®¡æ¨¡å¼é™¤å¤–ï¼‰

# tupleå…ƒç»„

å¯æ˜¯å‡å¦‚æˆ‘ä»¬æƒ³å®šä¹‰ä¸€ä¸ªé•¿åº¦é™åˆ¶åœ¨ 50 çš„æ•°ç»„å‘¢?éš¾ä¸æˆè¦å†™ 50 é number?

ä¸,è§£å†³åŠæ³•è¿˜æ˜¯æœ‰çš„,åœ¨ Typescript 3.0 ä¸­å¼•å…¥ä¸€ä¸ªæ–°çš„ç‰¹æ€§å«å…ƒç»„å±•å¼€

å‡å¦‚æˆ‘ä»¬æƒ³å®šä¹‰ä¸€ä¸ªé•¿åº¦ä¸º 50 çš„æ•°ç»„, æˆ‘ä»¬åªè¦è¿™æ ·å†™:

type Tuple50<TItem> = [TItem, ...TItem[]] & { length: 50 };

let iMArray: Tuple50<number> = [0,...,50];

å¯ä»¥çœ‹åˆ°,ç»“åˆå…ƒç»„å±•å¼€ä»¥åŠäº¤å‰ç±»å‹,æˆ‘ä»¬æˆåŠŸå®šä¹‰äº†ä¸€ä¸ªé•¿åº¦ä¸º 50,æ•°ç»„å…ƒç´ ä¸º number çš„æ•°ç»„.

å›åˆ°å‰è¨€æåˆ°çš„é‚£ä¸ªæ£‹ç›˜ç±»,æˆ‘ä»¬å°±å¯ä»¥è¿™æ ·å®šä¹‰ä¸€ä¸ª 9x9 çš„æ£‹ç›˜ç±»å‹äº†.

type Tuple9<TItem> = [TItem, ...TItem[]] & { length: 9 };

type TypeBoard<T> = Tuple9<Tuple9<T>>;

let board: TypeBoard<number> = [
[0, ..., 9],
...
[0, ..., 9],
]

æœ€åç»™ä¸€ä¸ªå°è£…å¥½çš„ Tuple ç±»

type Tuple<TItem, TLength extends number> = [TItem, ...TItem[]] & { length: TLength };

# playground

https://www.typescriptlang.org/zh/play?#code/PTAEHUFMBsGMHsC2lQBd5oBYoCoE8AHSAZVgCcBLA1UABWgEM8BzM+AVwDsATAGiwoBnUENANQAd0gAjQRVSQAUCEmYKsTKGYUAbpGF4OY0BoadYKdJMoL+gzAzIoz3UNEiPOofEVKVqAHSKymAAmkYI7NCuqGqcANag8ABmIjQUXrFOKBJMggBcISGgoAC0oACCoASMFmgY7p7ehCTkVOle4jUMdRLYTqCc8LEZzCZmoNJODPHFZZXVtZYYkAAeRJTInDQS8po+rf40gnjbDKv8LqD2jpbYoACqAEoAMsK7sUmxkGSCc+VVQQuaTwVb1UBrDYULY7PagbgUZLJH6QbYmJAECjuMigZEMVDsJzCFLNXxtajBBCcQQ0MwAUVWDEQNUgADVHBQGNJ3KAALygABEAAkYNAMOB4GRogLFFTBPB3AExcwABT0xnM9zsyhc9wASmCKhwDQ8ZC8iElzhB7Bo3zcZmY7AYzEg-Fg0HUiS58D0Ii8AoZTJZggFSRxAvADlQAHJhAA5SASAVBFQAeW+ZF2gldWkgx1QjgUrmkeFATgtOlGWH0KAQiBhwiudokkuiIgMHBx3RYbC43CCJVljEEwgA4mQGAjUagAMIKyWgADeihKNMLc7FZHy11QlE4zBXEJ4G8l25pe4Pq4UBG3nHYiGkP0Pct37Fg6DIKrXZFn863O4vfhUW4E9-3PUY7GvW970fMg9SXQ8ShGQQAm-X9Nz5Hd1z-RCBBQ4DQMwgicJKJC1BQmlIAITDKIIQ8AF9DxdGgEE3QQXiEVAVXg5dSLLPNCUyciAmY0D2M47iGKYvMxI4mluIQviXyXLCf1AoDjz-SCqNAejMOQ3DlLQp5RwAIX04TWMlJ5mGkL8CzUv94JUQAbeMAI2NAC45MhbMAB1NABG-QBCK0AeH1DPgal80LJ4aIc1ATNMgBtAAGABdULwtU1BR2iyKzPigBGVKlLCmkMvM-ljNygAmVK0pK4C4osoQAissgbLs4jNwNIr0vqoieDipLCtI5TgKy-l6tygrapoYCyqPbgBuq4JupKwQov5FVevKYznJ3HSQEAbgNADvdQAeBWm64xtATaeCy7aYtHXbaPOwQ5uu7hzLuwtTMe69ltI9wWL-CoyBxfl4qGkpkgXFUAZETDEoAbjhgAePaCCRigAGpMZ43CShUQBC6MAdO9AHnrQAAOUAU2tABC3bBVjOviSlh2nGpQlqRVWFU8dI6NvLs6NQExq61tAAAqOHBZ2gXQGjXh+cFr8srFigpbQh6pZluWhfMpWVZi771b1GWua6hmWuBsgAgIdh7BVWmTZKRi+KcAkzXRTdzak-GwEAMB1acACwjAC5PQBO0yC9yvNswOQ5VQBN+MAGcTABX4wA9tV5-zgpNlq2q-UCz13UY9Wgh8fnBxThuKmgnDGflgAAPQAYhVJLSgATgYUpkgqUoADFksXABmeiAB9G5btuO+7xcADZ6L1AASYBcMEQjytAgJ0BeeApDIGcGGzSS+MRIXCIAMiP-jmFX-QuMXpzcYZkRUizv8lVRZhPl5d-QAAFlvu+3Dza5QIJgkJhaMtdoxc0htDWGyt+R5QxqAVGn94GY1gT-X+AC-xAIFsvJ+ggPQWBVBQfgytBZ5T1M1MKsB8SP03KhfBkBCHEKlmQ+2DNHa-2vhhHBm4gFc3YXxFQgAQTUAGAugBbRUALLyVNAA5GYAJyD6YM1hpwyUM4HD7hQGDCGpEoY4hhv-GBoA4Eo1AAAdmQfySqaCGZKK3qol0ltraYBVAQRw2YACS2wVTRkSqsTW1i6HqAYUQ8WoALF6lYQ7LmztBIYM3Coh0Sg+J6RgNmEuTsBKu3Brhdh7CVDe15pHUOnl-bBxCiUNmawVS8xzhefOAEqy8X+v-AA+shTCvNcKwwrphGu9dh6t3bl3Hu-ch6JWbv0sePcp6z3nvvB+NdKm2QHnFPUwAL7yRaeRMJqTGm0iXqADZTUnDdAIcAFUAB+fIAAdFUA9Ll6gHrzJZZk9Qi2AMwfg0ZozkMEDUeQnjZbhL-vmMg7MQFgK5toq60D4bwNRgwFe7h9yxAxtjSxfEmZrEwnGGCPw1SgXihQZK5D0DEFzvuFUeUJ6ApKMzfkmNmaozyolUAZzQDMsFp8qWzNtzMxUIAXflACD0STQAVHK8ypidDylVxEQPvldWlH8vFfNAMzFByq1gyvPKC1VtM+FcwPvZEFaxn5Is0AAQg-sY+CmrMX8gOX8O+UTXbWtWFkiE0AUn6ormsridqtkNPRf-Bg2LECYTtQEI5SwVTAFrsAD5XzUK-K4p8wF+qg33mNa-TQ79+RUu2Wkl2Xg7V8LdSk-1DMVBpsQBmt+H9e4ythneRAoL+SgPAegyFuj0gwqMZW6tmAzEGLRQzRtWr+SVoJclKW47CUyv4QzR1XgR3qrvnOpJ7qUBlpKAu-ZBlElSUYspVgk4KDTj2ZwRMoBxzHtPX+FUApa4ABEn3PoFPwe9eUH0AFYZymU-a+kJeoEaymKgqSASp4CqiPVObYK8WriRpHqIAA

## readonly and const

https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes-func.html#discriminated-unions

TypeScript additionally has a readonly modifier for properties.

interface Rx {
readonly x: number;
}
let rx: Rx = { x: 1 };
rx.x = 12; // error
It also ships with a mapped type Readonly<T> that makes all properties readonly:

interface X {
x: number;
}
let rx: Readonly<X> = { x: 1 };
rx.x = 12; // error
And it has a specific ReadonlyArray<T> type that removes side-affecting methods and prevents writing to indices of the array, as well as special syntax for this type:

let a: ReadonlyArray<number> = [1, 2, 3];
let b: readonly number[] = [1, 2, 3];
a.push(102); // error
b[0] = 101; // error
You can also use a const-assertion, which operates on arrays and object literals:

let a = [1, 2, 3] as const;
a.push(102); // error
a[0] = 101; // error
However, none of these options are the default, so they are not consistently used in TypeScript code.

# union

è”åˆç±»å‹å€¼çš„ä¼ é€’å®¹æ˜“äº§ç”Ÿ bug

# params

1-3 ä¸ªå‚æ•°çš„è¯ä¸ç”¨ object
4 ä¸ªçš„è¯ç”¨ object

Type '((\_: DrillNode) => { position: any; value: string | undefined; }) | ((drillNode: DrillNode) => null)' is not assignable to type '(drillNode: DrillNode) => { position: "start" | "end"; value: string; } | null'.

a?.b ç­‰åŒäº a && a.b

# import
copy ç›®å½•å’Œæ–‡ä»¶æ—¶ï¼Œæ–‡ä»¶å†…éƒ¨çš„ imports ä¼šè‡ªåŠ¨å»é™¤ index.d åç¼€.

typeï¼Œinterfaceã€enum è¦å†™åˆ° d.ts é‡Œå»ï¼Œè¦ä¸ç„¶å®¹æ˜“å‡ºç°å¾ªç¯ imports çš„æƒ…å†µ

# å¯é€‰å±æ€§è®¿é—®

èµ‹å€¼è¡¨è¾¾å¼çš„å·¦ä¾§ä¸èƒ½æ˜¯å¯é€‰å±æ€§è®¿é—®ã€‚ts(2779)

# éç©ºæ–­è¨€

```ts
const a = queryTxt!;
```

The exported identifier "ModelFieldI" is not declared in Babel's scope tracker
as a JavaScript value binding, and "@babel/plugin-transform-typescript"
never encountered it as a TypeScript type declaration.
It will be treated as a JavaScript value.

This problem is likely caused by another plugin injecting
"ModelFieldI" without registering it in the scope tracker. If you are the author
of that plugin, please use "scope.registerDeclaration(declarationPath)".

'name' is deprecated.ts(6385)
lib.dom.d.ts(18305, 5): The declaration was marked as deprecated here.
Type 'void' is not assignable to type 'string'.ts(2322)
portal.ts(110, 3): The expected type comes from property 'name' which is declared here on type 'SavePortalParams'
(property) SavePortalParams.name: string

No overload matches this call.
Overload 1 of 2, '(props: MenuProps | Readonly<MenuProps>): Menu', gave the following error.
Type 'import("/Users/guonanci/Documents/magicbi_web/node_modules/antd/lib/menu/index").MenuMode | undefined' is not assignable to type 'import("/Users/guonanci/Documents/magicbi_web/node_modules/antd/node_modules/rc-menu/lib/interface").MenuMode | undefined'.
Type '"vertical-left"' is not assignable to type 'MenuMode | undefined'.
Overload 2 of 2, '(props: MenuProps, context: any): Menu', gave the following error.
Type 'import("/Users/guonanci/Documents/magicbi_web/node_modules/antd/lib/menu/index").MenuMode | undefined' is not assignable to type 'import("/Users/guonanci/Documents/magicbi_web/node_modules/antd/node_modules/rc-menu/lib/interface").MenuMode | undefined'.ts(2769)
Menu.d.ts(12, 5): The expected type comes from property 'mode' which is declared here on type 'IntrinsicAttributes & IntrinsicClassAttributes<Menu> & Readonly<MenuProps> & Readonly<{ children?: ReactNode; }>'
Menu.d.ts(12, 5): The expected type comes from property 'mode' which is declared here on type 'IntrinsicAttributes & IntrinsicClassAttributes<Menu> & Readonly<MenuProps> & Readonly<{ children?: ReactNode; }>'
(JSX attribute) mode?: MenuMode | undefined

Type '{ fullScreenId: string; displayChartsOnly: boolean; }' is not assignable to type 'IntrinsicAttributes & Omit<{ fullScreenId: string; sceneryDetail?: SceneryDetail | undefined; }, "sceneryDetail">'.
Property 'displayChartsOnly' does not exist on type 'IntrinsicAttributes & Omit<{ fullScreenId: string; sceneryDetail?: SceneryDetail | undefined; }, "sceneryDetail">'.

'findTargetFirstLevelMenu' implicitly has return type 'any' because it does not have a return type annotation and is referenced directly or indirectly in one of its return expressions.ts(7023)
const findTargetFirstLevelMenu: any

TypeError: Reduce of empty array with no initial value

å­—ç¬¦ä¸²çš„è”åˆç±»å‹æˆ–è€…å¤šç§ç±»å‹å€¼çš„è”åˆç±»å‹ && æšä¸¾

æ·»åŠ ä¸€çº§èœå•åï¼ŒleftTop-left ååº”æœ‰é—®é¢˜ã€‚å›¾è¡¨æ¸²æŸ“åŒºåº”è¯¥ä¿æŒä¸åŠ¨ï¼›

ä¸»é¢˜è®¾ç½®è¦ä¸€ç‚¹ç‚¹è®¾ç½®ï¼Œjs é‡Œçš„æ ·å¼æ€ä¹ˆå†™åˆ° antd-menu ç»„ä»¶ç‰¹å®š dom æ ·å¼é‡Œé¢å»ï¼Œcss fileï¼ŒinlineStyleï¼ŸclassNamesï¼Œstyled-componentï¼Ÿ(å°±å†³å®šç”¨å®ƒäº†)ï¼Œï¼ˆåªç ”ç©¶è‡ªå®šä¹‰çš„å³å¯,é»‘ç™½ä¸»é¢˜æ˜¯ç‰¹ä¾‹ï¼‰
ç”¨æ­£ç¡®çš„æ•°æ®ç»“æ„å’Œç®—æ³•ã€è®¾è®¡æ¨¡å¼æ¥é¿å¼€

Argument of type '{ partToChange: Partial<{ leftTopTheme: Record<Theme, LeftTopTheme>; leftTheme: Record<Theme, LeftTheme>; topTheme: Record<Theme, TopTheme>; }>; ... 10 more ...; menus: PortalMenu[]; }' is not assignable to parameter of type 'SetStateAction<PortalSetting>'.
Object literal may only specify known properties, and 'partToChange' does not exist in type 'SetStateAction<PortalSetting>'.ts(2345)
(property) partToChange: Partial<{
leftTopTheme: Record<Theme, LeftTopTheme>;
leftTheme: Record<Theme, LeftTheme>;
topTheme: Record<Theme, TopTheme>;
}>

Property 'firstLayerMenuColor' does not exist on type 'LeftTopTheme | LeftTheme | TopTheme'.
Property 'firstLayerMenuColor' does not exist on type 'LeftTheme'.ts(2339)

Type '{ children: Element; ref: RefObject<Element>; className: string; key: string; title: Element; onTitleClick: () => void; }' is not assignable to type 'IntrinsicAttributes & SubMenuProps'.
Property 'ref' does not exist on type 'IntrinsicAttributes & SubMenuProps'.ts(2322)
(JSX attribute) ref: React.RefObject<JSX.Element>
No quick fixes available

æ³›å‹æ˜¯ä¸ºäº†å‡å°‘ç±»å‹å£°æ˜æ¬¡æ•°ï¼Ÿ

Conversion of type 'EventDataNode' to type 'PortalMenu' may be a mistake because neither type sufficiently overlaps with the other. If this was intentional, convert the expression to 'unknown' first.
Type 'EventDataNode' is missing the following properties from type 'PortalMenu': k, layerIts(2352)

Argument of type 'Key' is not assignable to parameter of type 'string'.
Type 'number' is not assignable to type 'string'.ts(2345)
const findDftOpenKeys: (menusArr: PortalMenu[]) => Key[]
No quick fixes available

            setMenuOpenKeys([key] as any)
            setMenuOpenKeys([key]) // Type 'string' is not assignable to type 'string[]'.ts(2322) ????

Parsing error: Cannot find module '@babel/plugin-proposal-decorators'
Require stack:

- /Users/guonanci/Documents/magicbi_web/node_modules/@babel/core/lib/config/files/plugins.js
- /Users/guonanci/Documents/magicbi_web/node_modules/@babel/core/lib/config/files/index.js
- /Users/guonanci/Documents/magicbi_web/node_modules/@babel/core/lib/index.js
- /Users/guonanci/Documents/magicbi_web/node_modules/@babel/eslint-parser/lib/worker/babel-core.cjs
- /Users/guonanci/Documents/magicbi_web/node_modules/@babel/eslint-parser/lib/worker/index.cjs
- /Users/guonanci/Documents/magicbi_web/node_modules/@babel/eslint-parser/lib/client.cjs
- /Users/guonanci/Documents/magicbi_web/node_modules/@babel/eslint-parser/lib/analyze-scope.cjs
- /Users/guonanci/Documents/magicbi_web/node_modules/@babel/eslint-parser/lib/index.cjs
- /Users/guonanci/Documents/magicbi_web/node_modules/@eslint/eslintrc/lib/config-array-factory.js
- /Users/guonanci/Documents/magicbi_web/node_modules/@eslint/eslintrc/lib/index.js
- /Users/guonanci/Documents/magicbi_web/node_modules/eslint/lib/cli-engine/cli-engine.js
- /Users/guonanci/Documents/magicbi_web/node_modules/eslint/lib/cli-engine/index.js
- /Users/guonanci/Documents/magicbi_web/node_modules/eslint/lib/api.js
- /Users/guonanci/.vscode/extensions/dbaeumer.vscode-eslint-2.1.25/server/out/eslintServer.jseslint

ä¸ºä»€ä¹ˆ ts çš„ cmd+clickï¼Œæ¯æ¬¡éƒ½è¦ç‚¹å‡»ä¸¤æ¬¡

åªåœ¨æ¯ä¸ªå¤§ page ç›®å½•ä¸‹é¢å®šä¹‰ index.d.ts

The left-hand side of an assignment expression may not be an optional property access.ts(2779)

# åœ†æ‹¬å·æŠ¥é”™ï¼š

```tsx
  // ype 'ThemeField' is not assignable to type 'Record<string, string>'.
  // Index signature for type 'string' is missing in type 'ThemeField'.ts(2322)

  // wrong
  export const getFieldColorMap = (theme: string, fields: ThemeField[]): Record<string, string> => {
    const themeColors = getThemeColors(theme) || []
    return fields.reduce((acc:Record<string, string>,({ key: k }), i:number) => {
      if(themeColors.length) acc[k] = themeColors[i % themeColors.length]
      return acc
    },{})
    // right
    return fields.reduce((acc:Record<string, string>,{ key: k }, i:number) => {
      if(themeColors.length) acc[k] = themeColors[i % themeColors.length]
      return acc
    },{})
  }
```

Initializer provides no value for this binding element and the binding element has no default value.ts(2525)

```js
This condition will always return 'false' since the types 'Element' and 'boolean' have no overlap.ts(2367)
The left-hand side of an arithmetic operation must be of type 'any', 'number', 'bigint' or an enum type.ts(2362)
(property) pieInst: React.MutableRefObject<any>
```

```tsx
This condition will always return 'false' since the types 'Element' and 'boolean' have no overlap.ts(2367)
The left-hand side of an arithmetic operation must be of type 'any', 'number', 'bigint' or an enum type.ts(2362)
(property) pieInst: React.MutableRefObject<any>
          Chart={<Pie ref={pieInst} />}
          Chart={<Pie ref=={pieInst} />}

```

```js
Type '({ config: originConfig, isPreview, fetchData, onMessage, postMessage, updateConfig, }: PropsWithChildren<MBIComponentProps>) => void' is not assignable to type 'FC<MBIComponentProps>'.
  Type 'void' is not assignable to type 'ReactElement<any, any> | null'.ts(2322)

```

æ³›å‹ï¼šç±»å‹çš„ä¼ é€’ï¼Œå‡å°‘ç±»å‹å£°æ˜å’Œç±»å‹å¼•ç”¨ import

you
æœ‰ 1 ä¸ª bug æ˜¯æ··æ·†äº†ã€ŒæŒ‰ä½æˆ–ã€å’Œã€Œé€»è¾‘æˆ–ã€ï¼Œæ€ä¹ˆæå‰é¿å…ï¼Œä¼¼ä¹æ— æ³•åšåˆ°ï¼Œåªèƒ½ç”¨äººè„‘ï¼Ÿ

# ts in js

https://juejin.cn/post/6844904030221631501

è¿è¡Œ`yarn tsc`å¯¹tsæ–‡ä»¶è¿›è¡Œç±»å‹æ£€æŸ¥ã€‚

æ‹¬å·å†…çš„asè¯­æ³•ï¼Œç›´æ¥jsæŠ›é”™ï¼Ÿï¼Ÿ
