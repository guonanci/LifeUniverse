数据可视化 AntV 的设计原则是基于 Ant Design 设计体系衍生的，具有数据可视化特性的指导原则。它在遵循 Ant Design 设计价值观的同时，对数据可视化领域的进一步解读，如色板、字体的指引。
AntV 经过大量的项目实战经验，总结了四条核心原则：准确、清晰、有效、美，这四条原则按重要等级先后排序，相辅相成且呈递进关系。

# 准确

可视表达时不歪曲，不误导，不遗漏，精准如实反应数据的特征信息。例：某基金收益率趋势图，合理的值域区间可以反映真实的数据波动趋势。
(建议：自动检测 Y 轴值域范围，波幅占值域 60%，反映真实趋势；不建议：Y 轴从 0 开始，波幅较缓，看不清趋势；不建议：Y 轴值域范围过小，趋势过于夸张)

# 清晰

## 结构清晰与内容清晰

结构清晰：数据可视化呈现的是一幅作品，它是制作者分析思路的呈现，其布局决定阅读者的浏览顺序。清晰的平面布局以及清晰的数据纵深路径能很好的帮助阅读者获取信息。下图展示一个经典的仪表盘设计布局，上方的筛选区从顶层决定画布区呈现的数据，右侧区默认展示画布区的汇总信息，画布上激活数据点时，右侧则更新显示明细数据。

内容清晰：不让用户带着疑惑看图是我们始终不变的追求。当图上有数据日期、数据来源、数据指标需要说明时，应当在恰当的时间、合适的位置给予说明，以帮助阅读者更好地理解数据、定位问题。结构清晰-1.jpg

# 有效

信息传达有重点，克制不冗余，避免信息过载，用最适量的数据-油墨比（Data-ink Ratio）表达对用户最有用的信息。

# 美

美是一种克制，合理利用视觉元素进行映射，运用格式塔原理对数据进行分组，既能帮助用户更快的获取信息，也能在一定程度上建立一种秩序美、规律美。

https://antv-2018.alipay.com/zh-cn/vis/chart/index.html

# 设计语言

## 视觉

布局
有数据表明，人的平均注意力集中时间从 2008 年的 12 秒下降到 2015 年的 8 秒，这个时间还在缩短。我们的大脑每天都要处理海量信息，眼睛会倾向于通过扫视来获取重要信息，扫视的视线流一般是从左至右、从上往下。在数据可视化设计中，布局了决定用户的阅读顺序。在有限的屏幕空间内建立规范的空间布局，可以合理有效地传递信息，让内容为“扫视”而生！

组件构成
得益于图形语法的启发，AntV 设计团队从设计角度，将图表进行原子级拆分、抽象，形成这样一套通用组件，如下图中的标题、轴、图形、标签、注解、提示信息、图例等。

### 平面空间布局

将这些组件在平面空间上合理排布，可以分清主次，同时决定我们的阅读先后顺序。

### 纵向空间层级

我们引入“组件海拔”的概念，去管理这些组件的层级关系。将组件的重要层级重新梳理，归为四类：次要信息、辅助信息、正文、强调信息。通过增加透明度来决定视觉上的“Z”轴的海拔层次。

### 布局示例

以图例为例，图例是对图形数据的概括。通常人的视觉动线是从左到右、从上至下。因此我们习惯性把图例放在左上角，这对绝大多数图表来说没有问题。但图形的变化是复杂多样的，如果图的阅读顺序不是从左到右，而是从上至下，比如下图右边的堆叠柱状图，它是从上往下阅读。因此设计师对图例的位置进行了微调，让其图形与图例顺序建立关联，提高信息获取效率。

## 色板

在可视化设计中，色板的运用原则上优先保障准确性，考虑在操作指引、交互反馈上起到强化或凸显的作用。其次需兼顾色障碍群体，帮助有色盲色弱的人群也能在数据可视化中获取洞见。

颜色映射原理
在数据可视化领域中，数据与颜色的映射是非常重要的一个环节。颜色有三个视觉通道，分别是色调（H）、饱和度（S）、明度（B），不同的视觉通道可以与不同的数据类型建议关联。

色调（H）：通常使用颜色中的不同色调来描述不同的分类数据，如水果品类中苹果映射为红色、香蕉映射为黄色、梨映射为绿色，将品类与色调（H）建立了关联。

饱和度（S）/明度（B）：颜色通过明暗和饱和度的共同变化来描述有序或数值型的连续数据，比如身高由低到高或由 160cm 到 180 cm 的颜色映射为由浅到深，将连续变化与颜色的明暗饱和变化建立关联。

### 6 大色板类型

AntV 色板以蚂蚁极客蓝为起始主色，根据不同数据类型、使用场景扩展出 6 种可视化色板类型，可完美兼容 Ant Design UI 资产。以下所有色板均通过无障碍测试校验，可放心使用。

#### 分类色板

如图水果价格走势对比，使用红色代表苹果价格、蓝色代表蓝莓价格、黄色代表香蕉价格。

#### 邻近色顺序色板

2017 年西安居民人均消费支出，通过连续的颜色变化，可以快速感知出居住方面消费占比最大，其次食品烟酒，第三是交替通信。

#### 叠加色板

双变量映射地图，相对于单变量映射的地图，该地图形式更加新颖，十分适合用来展示两个紧密联系的变量信息。如下图所示，图中展现了美国国民人口居住密度和家庭生产总值的分布关系，纵向由浅到深的紫色映射了人口密度，横向由浅到深的蓝色映射了家庭收入水平，相交的颜色可以总体反映出人口和家庭的分布情况。可以从地图中清晰地看到，人口多且收入高的大多分布在沿海地区，人口数少且收入低的则主要分布在中部地区。
AntV 是蚂蚁金服全新一代数据可视化解决方案，致力于提供一套简单方便、专业可靠、不限可能的数据可视化最佳实践。得益于丰富的业务场景和用户需求挑战，AntV 经历多年积累与不断打磨，已支撑整个阿里集团内外 8000+ 业务系统，通过了日均千万级 UV 产品的严苛考验。AntV 解决方案主要包含以下工具库：
• G2：数据驱动的高交互可视化图形语法
• G6：专注解决流程与关系分析的图表库
• F2：适于对性能、体积、扩展性要求严苛场景下使用的移动端图表库
• 一套完整的图表使用和设计规范，致力于提供一套简单方便、专业可靠、无限可能的数据可视化最佳实践。
其中 G2 / F2 是目前 JavaScript 社区对《The Grammar of Graphics》一书还原度最高的实现，刚一开源就得到 Leland Wilkinson 本人的肯定。
除实现“图形语法”部分以外，AntV 系列还针对 JavaScript 技术栈在“数据驱动”和“交互”方面进行探索，接下来的课程，我们将以这几个类库为载体，介绍如何利用图形语法和数据驱动的思想实战数据可视化。

# 可视化思维步骤

本章就来介绍，这张图是如何实现的，怎么从数据变成可视化图形。
一种制作方法是，打开 PS 软件，一个个增加图形，调整位置、大小以及调整。不过，这是绘图，而不是数据可视化。数据可视化需要有数据，而且是结构化数据，然后将数据展示成图形。
让我们看看如何使用数据可视化的思维，绘制出这张图表。
• 第一步：拿到数据，分析数据类型
• 第二步：将数据绘制成一个图形
• 第三步：将数据字段映射成图形的属性
• 第四步：对图形进行调整

## 原始数据

这是一种大家都很熟悉的方式，这就是我们身边万物的分类方式。
• 名词：常见的名词，不关心顺序，比如国家的名称，瓷器的名称
• 有序：有序的分类，例如警报信息，从低到高分为黄色警告、橙色警告和红色警告
• 间隔：有间隔的数字，0 不代表没有。例如温度，0 度不代表没有温度
• 比例：表示字段之间存在比例关系，0 必须有意义，瓷器的大小就是一个比例值。
另一种划分方式更加简单，是按照数据是否连续进行类型的划分。
• 分类：每个值都是一个离散的个体，例如瓷器的名称，可以细分为有序的分类和无序的分类。
• 连续：连续不间断的数值，时间也是一种连续的数据类型，瓷器的生产日期就是一个连续值
下面再以另一份温度的数据为例。
[
{"month":"一月","temperature":7,"city":"tokyo"},
{"month":"二月","temperature":6.9,"city":"newYork"},
{"month":"三月","temperature":9.5,"city":"tokyo"},
{"month":"四月","temperature":14.5,"city":"tokyo"},
{"month":"五月","temperature":18.2,"city":"berlin"}
]
上面的对象中，month 代表月份，temperature 代表温度，city 代表城市。
• month 和 city 都是分类数据，但是又有所差异。month 是有序的分类类型，而 city 是无序的分类类型。
• temperature 是连续的数字

## 图形元素

## 图表用法

一提到图表，大家脑海里浮现的，通常都是柱状图、饼图、趋势图等等。这是按照图形等维度对图表进行分类，经常会导致图表的误用。
图表的作用，是帮助我们更好地看懂数据，选择什么图表，需要回答的首要问题是**我有什么数据，需要用图表做什么**，而不是图表长成什么样，因此我们从数据出发，从功能角度对图表进行分类：比较类，分布类、流程类、地图类、占比、区间、关联、时间、趋势
https://antv-2018.alipay.com/zh-cn/vis/chart/bar.html
https://antv.vision/zh（图表分类：比较、趋势、组成、占比、分布、排名、关系、空间）

## 图形映射

视觉、可视化映射核心），将图形属性进行编码，同数据关联起来的工具。这个概念（工具）在后面章节里会反复出现。
进行图形映射时，我们需要考虑不同图形属性的表现力和有效性，主要体现在下面几个方面。

- 准确性：是否能够准确地表达视觉数据之间的的变化
- 可辨认性：同一个视觉通道能够编码的分类个数，即可辨识的分类个数上限。
- 可分离性：不同视觉通道的编码对象放置到一起，是否容易分辨
- 视觉突出：重要的信息，是否用更加突出的图形属性进行编码
  **上图中，分类数据里面，表达能力最好的是位置，其次是颜色形状，最差是纹理。连续数据里面，表达能力最好的是坐标，其次是长度和角度，最差的是亮度、饱和度。**

### 规则

- 位置：平面位置有两个维度，因此可以映射到两个数据字段
- 颜色：颜色有色调、亮度和饱和度，色调一般用于区分不同的分类，亮度和饱和度用于映射连续的字段
- 形状：本身是一种分类（离散量），所以一般用于表示分类的数据字段
- 大小：一种连续量，很自然地用于映射连续的字段。

# 图形语法

## 要素

图形语法是通过 Geometry 图形要素、图形属性（视觉通道）和到数据字段的映射形成的。

- Geometry：可视化过程中使用的几何图形，例如：点线面多边形等等
- Attribute 位置颜色形状大小
- Mapping 图形属性到数据字段的映射

### Geometry

为了便于理解，我们使用了记住抽象的 geometry：

- point 使用一个个点表达数据，有各种各样的图形
- line 使用一条线表示一个数据集合
- area 在闲的下部增加一个阴影，突出数据的大小
- interval 使用柱子的长度，起始和结束位置表示数据的大小
- polygon 复杂的对象如地图
- edge 节点与节点之间的关联
  数据和图形的对应关系有 2 种：
- 1：1 一条数据使用一个图形表示，如一个点（柱子）表示一条数据
- n：1 如一条线表示多个日期的气温

## 映射语法

```js
color('red') // 使用常量指定固定的属性值
color('type', ['red', 'blue']) // 使用数组进行数据映射
color('type', (type) => {
  // 回调函数
  if (type == 'type1') return 'red'
  return 'blue'
})

position('field1*field2') // 指定映射到position的两个字段
color() // above three ways, 设置颜色的映射字段和方式
shape('circle')
shape('field', shapes)
shape('field', cb)

point().position('GDP+lifespan').color('mainland').size('population')
```

## 实例展示

使用图形语法实现上一章的瓷器图表。通过修改一个时间通道的映射方式，完成由瓷器到图形的映射，体会由具象到抽象，然后再到具象的过程，以此来感受图形语法的力量

```js
const data = [
  {
    name: '明 | 宣德窑 | 青花描红云龙纹合碗',
    time: 1426,
    size: 127.01999999999998,
    color: [
      [113.61791967044336, 41.56745623069223, 17.713697219359133],
      [150.5673289183225, 153.89448123620434, 148.9646799117],
      [82.16709511568114, 96.03856041131172, 110.71379605826922],
    ],
    url: 'https://gw.alipayobjects.com/zos/rmsportal/wxiFrnPFTozrbQMRLUQc.png',
  },
  {
    name: '南宋 | 龙泉窑 | 青瓷莲瓣碗',
    time: 960,
    size: 281.7,
    color: [
      [87.33020134228224, 115.07248322147646, 64.18926174496552],
      [47.64470588235352, 42.89411764705878, 25.555294117646497],
    ],
    url: 'https://gw.alipayobjects.com/zos/rmsportal/YgOyMtxYjDRflrndZAXo.png',
  },
]
```

我们看到上面的图表使用了图片来表示不同瓷器，前面的图形元素中讲到，在可视化中我们使用 point、line、interval、polygon 等几何元素来表示图形，并不包含图片。因此我们将图片抽象成 point，不同的图片代表不同的 point 形状。
位置
可视化的第一步需要思考的是，如何让用户通过对图形的识别实现对数据的认知，从而感受到数据的特点和差异。
我们首先尝试，如何让数据决定将图形摆放到哪个位置。
• 由于画布是个矩形平面，图形的位置由 x 轴位置和 y 轴位置共同确定
• 将 time 映射到 x 轴，y 轴方向居中显示
使用图形语法则是这样表示：
chart.point().position('time')
确定图形在 y 轴的位置，在图形语法中有两种方式：
• 方法一：增加一个常量占位符 position('time\*1')，表示 y 轴的位置是常量。
• 新增加一个数据字段映射到 y 轴，控制图形的上下位置。
我们采用第二种方案，在数据源中增加一个 yValue 的字段。

```js
{"name": "明 | 宣德窑 | 青花描红云龙纹合碗",
 "time": 1426,
 "size": 127.01999999999998,
 "color": [
    [113.61791967044336, 41.56745623069223, 17.713697219359133],
    [150.5673289183225, 153.89448123620434, 148.9646799117],
    [82.16709511568114, 96.03856041131172, 110.71379605826922]],
 "url": "https://gw.alipayobjects.com/zos/rmsportal/wxiFrnPFTozrbQMRLUQc.png",
 "yValue": 0.5
},
{"name": "南宋 | 龙泉窑 | 青瓷莲瓣碗",
 "time": 960,
 "size": 281.7,
 "color": [
    [87.33020134228224, 115.07248322147646, 64.18926174496552],
    [47.64470588235352, 42.89411764705878, 25.555294117646497]],
 "url": "https://gw.alipayobjects.com/zos/rmsportal/YgOyMtxYjDRflrndZAXo.png",
 "yValue": 0.2
}
```

图形语法我们就可以写成：

```js
chart.point().position('time*yValue')
```

根据 yValue 映射成图形的大小

```js
chart.point().position('time*yValue').size(yValue, [10, 50])
```

```js
chart
  .point()
  .position('time*1')
  .color('name', ['rgb(87, 115, 64)', rgb('113, 41, 17')])
  .size('size', (size) => size / 4)
  .label('name', { offset: -80 })
  .shape('colorPalette') // support multiple colors
```

使用植物叶子表示瓷器
再来做些更有趣的形状，实现瓷器数据变换为植物形状的魔法。下面来看一下形状映射的逻辑：
瓷器的大小决定了植物的大小；瓷器颜色的构成数决定它将被映射为哪种植物，颜色构成少于 3 个的，我们用叶子的形象来表现，颜色构成大于等于三个的，我们用花朵(圆的组合)的形象来表现。
chart.point().position('time\*1').size('size',size =>{
return size/4;
})
.shape('blossom');

# 图表分类

一提到图表，大家脑海里浮现的，通常是柱状图、饼图、趋势图等等。这是按照图形等维度对图表进行分类，经常会导致图表的误用。

图表的作用，是帮助我们更好地看懂数据。选择什么图表，需要回答的首要问题是『我有什么数据，需要用图表做什么』，而不是 『图表长成什么样』 。因此我们从数据出发，从功能角度对图表进行分类，如下所示：

**比较类 tag-compare**

## 柱状图 column,bar(horizontal direction)（比较，变形：直方图、分组柱状图、堆叠柱状图、玉玦图)

适合的场景
例子 1: 适合应用到分类数据对比
不适合的场景
例子 1：分类太多不适合使用纵向柱状图

如对比不同省份的人口数量。分类情况过多时，柱状图的文本为了排布合理，需要进行旋转，不利于阅读，相比于纵向柱状图，横向柱状图更适用于此类分类较多的场景。

使用横向柱状图，文本可以横向排布，便于用户的阅读，效果如下：
例子 2：不适合表示趋势

柱状图使用矩形的长度（宽度）来对比分类数据的大小，非常方便临近的数据进行大小的对比，不适合展示连续数据的趋势。下图本想展示 ACME 这只股票在 2015 年 9 月份整个月的每日的价格走势，但是效果不尽人意。

随着有序的时间变化的数值趋势，更适合使用折线图或者面积图。

- 图表类型： 横向柱状图
- 适合的数据 列表：一个分类数据字段、一个连续数据字段
- 功能 对比分类数据的数值大小
- 数据与图形的映射 分类数据字段映射到纵轴的位置
- 连续数据字段映射到矩形的宽度
- 适合的数据条数 <= 30

### 分组柱状图和堆叠柱状图

- 分组 可以对比同一个分组内部不同分类的数据大小，也可以对比不同分组内相同分类的数据大小，但无法对比各分组的总量
- 堆叠 可以对比同一个分组内部不同分类的数据大小或占比，也可以对比分组的总量，但不适合对比不同分组内相同分类的数据大小

## 双向柱状(正负条形)图 bi-directional-bar（变形：柱状图，分组柱状图、堆叠柱状图、玉玦图）

> 适合的场景: 1.正反类数据对比 模拟某公司各部门对某项任务完成情况数据对比

- 颜色 区分部门
- 空心和实心（形状） 完成人数和未完成人数
- 位置 小组
  正反分类数据对比
  双向柱状图和柱状图
  柱状图只能绘制在同一个坐标轴内，每个柱子只能表示一个数据
  双向柱状图包含正向和反向两个坐标轴，每个柱子可以表示一个正向数据和一个反向数据

不适合的场景
双向柱状图不适合不含相反含义的数据

双向柱状图的扩展
例子 1: 层叠双向柱状图

下图展示了不同类型的人群对某个问题的同意程度的统计数据，分为非常不同意、不同意、没意见、同意和非常同意五种程度，其中非常不同意和不同意作为反向柱状图，不同程度用不同颜色来表示。

### 扩展

- 层叠（Strongly Disagree，Disagree, No Opinion, Agree, Strongly Agree
- 分组（收入支出净利润）

## 气泡 bubble(比较、分布)

antv-2018.alipay.com/zh-cn/vis/chart/bubble.html

多变量图表，散点图的变体，也可以认为是散点图和百分比区域图的组合

使用三个值来确定每个数据序列，和散点图一样，气泡图将两个维度的数据值分别映射为笛卡尔坐标系上的坐标点，其中 X 和 Y 轴分别代表不同的两个维度的数据，但是不同于散点图的是，气泡图的每个气泡都有分类信息（他们显示在点旁边或者作为图例）。每一个气泡的面积代表第三个数值数据。另外还可以使用不同的颜色来区分分类数据或者其他的数值数据，或者使用亮度或者透明度。表示时间维度的数据时，可以将时间维度作为直角坐标系中的一个维度，或者结合动画来表现数据随着时间的变化情况。

气泡图通常用于比较和展示不同类别圆点（这里我们称为气泡）之间的关系，通过气泡的位置以及面积大小。从整体上看，气泡图可用于分析数据之间的相关性。

需要注意的是，气泡图的数据大小容量有限，气泡太多会使图表难以阅读。但是可以通过增加一些交互行为弥补：隐藏一些信息，当鼠标点击或者悬浮时显示，或者添加一个选项用于重组或者过滤分组类别。

另外，气泡的大小是映射到面积而不是半径或者直径绘制的。因为如果是基于半径或者直径的话，圆的大小不仅会呈指数级变化，而且还会导致视觉误差。

| 图表类型         |                       气泡图                       |
| ---------------- | :------------------------------------------------: |
| 适合的数据       |             三个连续字段，一个分类字段             |
| 功能             | 观察数据的分布情况，对比各个分类字段对应的数值大小 |
| 数据与图形的映射 |                    两个连续字段                    |

气泡图的应用场景

- 一、分类对比数据
  气泡图可用于显示分类数据，这种情况下，相比于柱状图它能达到更美观的目的。

- 二、多变量映射，用于分析数据的相关性
  气泡图作为散点图的变体，也可用于探索分析数据的相关性，在散点图的基础上，还可新增一至两个维度（映射至气泡的大小和颜色）

- 三、与地图的结合（Bubble Map）
  气泡图的另一个广泛用途，就是气泡图与地图的结合，即带气泡的地图，来展示具有地域特征的数据。

### https://visage.co/data-visualization-101-bubble-charts/

## 子弹 bullet(比较)

样子很像子弹射出后带出的轨道，所以称为子弹图。子弹图的发明是为了取代仪表盘上常见的那种里程表，时速表等基于圆形的信息表达方式。子弹图的特点如下：

每一个单元的子弹图只能显示单一的数据信息源
通过添加合理的度量标尺可以显示更精确的阶段性数据信息
通过优化设计还能够用于表达多项同类数据的对比
可以表达一项数据与不同目标的校对结果

图表类型 子弹图
适合的数据 列表：一个分类数据字段、一个连续数据字段、一个范围数组字段、一个目标字段
功能 对比分类数据的数值大小、所处区间以及是否达标
数据与图形的映射 分类数据字段映射到分类轴位置
连续数据字段映射到数据条的长度
目标字段映射到测量标记的刻度轴位置
范围数组映射到背景色条的大小
适合的数据条数 不超过 10 条数据

子弹图的应用场景
适合的场景
例子 1: 显示阶段性数据信息

下图是一个模拟商铺一段时间内的经营情况的数据，一共 5 条数据，分别代表收入（单位：千美元）、利率（单位：％）、平均成交额（单位：美元）、新客户（单位：个）和满意度（1-5）五个方面，每个方面都有代表好、中、差的 3 个范围和预先设定的目标。

title ranges actual target subtitle
Revenue [150,225,300] 270 250 US$, in thousands
... ... ... ... ...
说明：

title 字段，用于区分不同的类型
ranges 字段，使用背景色条的长度，表示区间范围
actual 字段，使用数据条的长度，表示实际数值
target 字段，使用测量标记的刻度轴位置，表示目标值

### extend

例子 1: 反向子弹图

表达负面（消极）数据时，可以将子弹图做方向上的反转。下图用反向子弹图表示开销的多少。

title ranges actual target
Revenue [1000,2000,5000] 1700 1500
例子 2:层叠子弹图

表达一些阶段性的数据时，例如，我们定义了全年的定额目标，但是每个季度都会阶段性地显示当前完成的进度，此时就需要同时表达每个季度的数据和全年整体的定额目标数据。

State 第一季度 第二季度 第三季度 第四季度 ranges target
年度收益 3820 6080 2930 5390 [12000,15000,20000] 16000

子弹图和柱状图
柱状图主要用于多个分类间的数据（大小、数值）的对比
子弹图主要用于各个分类间各自的数值所处状态与测量标记的对比，突出的是每个分类自身的情况，没有分类间的比较，用于展示各个分类的子弹图单元相对独立。

## 色块图 ColorMap，HeatMap（比较类，分布类）

由小色块有序且紧凑。 最大好处：**2 维画布上的空间利用率非常高**。
理论上小色块的大小是可以等于硬件像素的大小。想象一下，如果用每个像素直接编码数值，一块 200px\*200px 的小屏幕，也可以最多编码 40000 子项！

所以色块图特别适合用于直接对数据量较大的、相对原始的数据进行分析。比如：生物基因科学领域，色块图常被用于微阵列数据分析。

另外，关于颜色的用法有两点需要强调一下：

如果是应对展示用的场景，数据量不大、颜色分类数量小于或等于 7 个，可以采用分类的颜色映射。
如果应对分析相关的需求，为了更有效率的使用色块图，我们建议使用连续（渐变）的颜色映射数值。由于人眼对颜色的分辨力有限，所以用于编码的颜色不宜过多，我们推荐的颜色的数量在 3 ～ 11 个之间。

### 色块图和热力图

数据类型上看：热力图是用两个连续字段确定数值点的位置，色块图是用两个分类字段确定数值点的位置。
功能上看：热力图主要用于展示数据的分布情况，色块图在观察数据分布以外，还能进行列对比和行对比。

## 漏斗 funnel（比较、流程类）

https://antv-2018.alipay.com/zh-cn/vis/chart/funnel.html
用于业务流程比较规范、周期长、缓解多的单流程单向分析，通过漏斗各环节业务数据比较能够直观地发现和说明问题所在的环节，进而做出决策。漏斗图用梯形面积表示某个环节业务量与上一个环节之间的差异。漏斗图从上到下，有逻辑上的顺序关系，表现了随着业务流程的推进业务目标完成的情况。
漏斗图总是开始于一个 100%的度量，结束于一个较小的数量。在开始与结束之间由 N 个流程环节组成。每个环节由一个梯形表示，梯形的上底宽度表示当前环节输入情况，下-出，差值形象地表现了在当前环节业务量的减小量，梯形边的斜率表现了当前环节的减小率。通过给不同环节标以不同颜色，可以帮助用户更好地区分各个环节之间的差异。
漏斗图的所有环节的流量都应该使用同一个度量。

- 适合的数据：一个分类数据字段、一个连续数据字段
- 功能：对比 分类数据的数值大小
- 数据与图形的映射：分类：映射到颜色，连续：梯形面积
- 适合的数据条数：不超过 12 条

### 适合的应用场景

- 例子：适用于流程流量分析。
  随着流程的推进，每个环节所要达成的成功数量在减少。最终的成交量是企业想要达成的交易数量。通过将各个流程中数量的信息画入漏斗图可以清晰的分析到哪个环节是当前业务流程中的薄弱环节，哪个环节是流量转化的瓶颈，进而帮助人们更加专注于薄弱环节提高整个流程的产出。
  （浏览网站、放入购物车、生成订单、支付订单、完成交易）蓝绿黄藏青紫

### 扩展

- 金字塔图 头部变尖 定制化需求
- 对比 funnel 传达了流程、预期和实际情况的对比含义
- 对称 funnel 同时对两个业务流程进行分析，同时对这两个业务流程质检进行对比

## 直方 histogram

形状类似柱状图却有着与柱状图完全不同的含义。直方图牵涉统计学的概念，首先要对数据进行分组，然后统计每个分组内数据元的数量

## k-chart（时间、比较、趋势）

图表类型 K 线图
适合的数据 一个时间数据字段，五个连续字段
功能 观察数据的变化趋势
对比分类数值大小
数据与图形的映射 一个连续字段映射到横轴数值（通常是日期）
另外四个连续字段映射到纵轴
一个分类字段映射到颜色
适合的数据条数 暂无限制
适合场景
K 线图主要用于金融领域里展示股票，期货等交易数据，按照时间维度分为日 K 线、周 K 线、月 K 线。展示的数据需要满足 K 线构成的四要素：即开盘价、收盘价、最高价、最低价。

例子 1：下图结合区域选择插件，展示了“湖南天雁”股票 2015 年 1 月 5 日至 2015 年 11 月 19 日的日 K 线图。

## radar

雷达又叫戴布拉图、蜘蛛网图。传统的雷达图被认为是一种表现多维（4 维以上）数据的图表。它将多个维度的数据量映射到坐标轴上，这些坐标轴起始于同一个圆心点，通常结束于圆周边缘，将同一组的点使用线连接起来就称为了雷达图。

它可以将多维数据进行展示，但是点的相对位置和坐标轴之间的夹角是没有任何信息量的。在坐标轴设置恰当的情况下雷达图所围面积能表现出一些信息量。
着重要强调的是，虽然雷达图每个轴线都表示不同维度，但使用上为了容易理解和统一比较。使用雷达图经常会人为的将将多个坐标轴都统一成一个度量，比如：统一成分数、百分比等。这样这个图就退化成一个二维图了，事实上这种雷达图在日常生活更常见、更长用。 另外，雷达图还可以展示出数据集中各个变量的权重高低情况，非常适用于展示性能数据。

雷达图的主要缺点是：

(1) 如果雷达图上多边形过多会使可读性下降，使整体图形过于混乱。特别是有颜色填充的多边形的情况，上层会遮挡覆盖下层多边形。

(2) 如果变量过多，也会造成可读性下降，因为一个变量对应一个坐标轴，这样会使坐标轴过于密集，使图表给人感觉很复杂。所以最佳实践就是尽可能控制变量的数量使雷达图保持简单清晰。

英文名：Radar Chart, Spider Chart, Web Chart, Polar Chart, Star Plots

https://antv.vision/zh/docs/specification/language/basic

https://www.yuque.com/mo-college/weekly

## radial-bar

玦[jué]：半环形有缺口的佩玉，古代常用以赠人表示决绝。

玦图（又名，环形柱状图），是柱状图关于笛卡尔坐标系转换到极坐标系的仿射变换。其意义和用法与柱状图类似。
玉玦图有半价反馈效应。由于玉玦图中是用角度表示每个玦环数值的大小，角度是决定性因素。所以，哪怕外侧（半径大的）玦环的数值小于内侧（半径小的）玦环，外侧的每个玦环会相对的比里面的玦环更长。这会造成视觉上的误解。

而且因为我们的视觉系统更善于比较直线，所以笛卡尔坐标系更适合于比较各个分类的数值比较。所以玉玦图从实用的角度去看，其更多的是一种审美上的需求。

## rose

南丁格尔玫瑰图又名鸡冠花图、极坐标区域图，是南丁格尔在克里米亚战争期间提交的一份关于士兵死伤的报告时发明的一种图表。

南丁格尔玫瑰图是在极坐标下绘制的柱状图，使用圆弧的半径长短表示数据的大小（数量的多少）。

由于半径和面积的关系是平方的关系，南丁格尔玫瑰图会将数据的比例大小夸大，尤其适合对比大小相近的数值。

由于圆形有周期的特性，所以玫瑰图也适用于表示一个周期内的时间概念，比如星期、月份。

多维对比－单雷达链
世界经济论坛不久前还发布了全球竞争力指数报告，通过基本要求、效率增强器、创新与成熟因素等三个大方面对全球国家和地区进行竞争力评估。中国排名第 28，得分 4.89。通过雷达图，我们可以清晰看出中国在各个因素下的得分情况，进而进行分析。数据来源丢失，数据不可靠！

常常表示由多个维度组成的能力衡量。

如下图展示了华为 Mate 和 中兴 Grand Memo 两款手机的综合表现雷达图，分别从易用性、功能、拍照、跑分、续航这五个维度进行考核，可以看出两款手机在这个维度方面的性能都比较平衡，同时也可逐项对比。虚构数据

## spiral

螺旋图，基于阿基米德螺旋坐标系，常用于绘制随时间变化的数据，从螺旋的中心开始向外绘制。

螺旋图有两大好处：

绘制大量数据：螺旋图节省空间，可用于显示大时间段数据的变化趋势；
绘制周期性数据：螺旋图每一圈的刻度差相同，当每一圈的刻度差是数据周期的倍数时，能够直观的表达数据的周期性。
英文名：Spiral Chart

螺旋图的构成

图表类型 螺旋图
适合的数据 一个时间数据字段，一个连续字段
功能 观察数据周期和变化趋势
数据与图形的映射 时间数据字段映射到旋转角度 θ 轴，连续字段映射到线圈间距 radius 轴
适合的数据条数 100 条以上

## stacked-area（比较、占比、趋势、区间、时间）

堆叠面积图的简介
堆叠面积图和基本面积图一样，唯一的区别就是图上每一个数据集的起点不同，起点是基于前一个数据集的，用于显示每个数值所占大小随时间或类别变化的趋势线，展示的是部分与整体的关系。

堆叠面积图上的最大的面积代表了所有的数据量的总和，是一个整体。各个叠起来的面积表示各个数据量的大小，这些堆叠起来的面积图在表现大数据的总量分量的变化情况时格外有用，所以堆叠面积图不适用于表示带有负值的数据集。非常适用于对比多变量随时间变化的情况。

在堆叠面积图的基础之上，将各个面积的因变量的数据使用加和后的总量进行归一化就形成了百分比堆叠面积图。该图并不能反映总量的变化，但是可以清晰的反应每个数值所占百分比随时间或类别变化的趋势线，对于分析自变量是大数据、时变数据、有序数据时各个指标分量占比极为有用。

堆叠面积图的应用场景
适合场景
例子 1：百分比堆叠面积图

下图显示的是近几个月安卓手机各个版本在市场的占比情况。

date（日期） value （占比） name (版本号)
2015-04 4.975 4.1.1
2015-04 8.4317 4.1.2
2015-04 4.6018 4.2.1
2015-04 18.2945 4.2.2
。。。 。。。 。。。
示例 2：游戏公司在 2001，2002，2003，2004 几年内不同分类的游戏的销售情况：

year（年份） genre（游戏类型） sold（销售量）
2001 Strategy 11,500
2001 Action 6,000
2001 Shooter 3,500
2001 Other 1,500
2002 Strategy 10,500
2002 Action 8,000
2002 Shooter 4,500
2002 Other 1,800
... ... ...
不适合的场景
例子 1：分类数据的比较不要使用面积图

前面的示例中的游戏销售情况，比较的是 4 年的游戏销售情况，如果用于比较各个游戏类型的销售情况时，使用面积图不太合适，此时应该使用堆叠柱状图。

与面积图的对比
堆叠面积图是一种特殊的面积图，都是表现数据在连续一段时间、一个数据区间内的趋势
堆叠面积图侧重于表现不同时间段（数据区间）的多个分类累加值之间的趋势
百分比堆叠面积图表现不同时间段（数据区间）的多个分类占比的变化趋势
与堆叠柱状图的对比
堆叠柱状图和堆叠面积图都可以呈现不同分类的累加值
堆叠柱状图和堆叠面积图的差别在于，堆叠面积图的 x 轴上只能表示连续数据（时间或者数值），堆叠柱状图的 x 轴上只能表示分类数据

## stacked-column(bar) 比较、占比

与并排显示分类的分组柱状图不同，堆叠柱状图将每个柱子进行分割以显示相同类型下各个数据的大小情况。它可以形象得展示一个大分类包含的每个小分类的数据，以及各个小分类的占比，显示的是单个项目与整体之间的关系。我们将堆叠柱状图分为两种类型：

一般的堆叠柱状图：每一根柱子上的值分别代表不同的数据大小，各层的数据总和代表整根柱子的高度。非常适用于比较每个分组的数据总量。

百分比的堆叠柱状图：柱子的各个层代表的是该类别数据占该分组总体数据的百分比。

堆叠柱状图的一个缺点是当柱子上的堆叠太多时会导致数据很难区分对比，同时很难对比不同分类下相同维度的数据，因为它们不是按照同一基准线对齐的。

一般堆叠柱状图适合的场景
例子 1：对比不同分组的总量大小，同时对比同一分组内不同分类的大小。如下图显示的是每种化妆品在各个城市的销售情况，通过堆叠柱状图，我们可以很清晰对比同一种化妆品到底在哪个城市销售更好。

name（化妆品名称） city revenue(销售收入)
Nailpolish Florida 12814
Eyebrowpencil Florida 13012
Rouge Texas 9054
。。。 。。。 。。。

## treeMap 矩形树图 比较占比关联

适合展示带权的树形数据。

例子 1：下图是 2015 年手机品牌及其下属手机型号的销量信息。
不适合的场景
没有权重关系，且需要明显展示层级关系，用分叉树图更合适

例子 2：某公司组织部门图。第一个图是用矩形树图绘制，没有权重，层次不清。第二个图用分叉树图绘制，部门组织层级清晰明了。

矩形树图和马赛克图
矩形树图用于展示树形数据，是关系型数据。马赛克图用于分析列表数据，是非关系型数据。
矩形树图和分叉树图（分叉树图介绍敬请期待）
矩形树图用于展示带权的数据，分叉树图用于展示不带权的数据
两个图表都用于展示层次数据，但是分叉树图展示的层次关系更清晰
矩形树图能更多的展现树形结构内部的占比关系，分叉树图没有这个能力

https://github.com/d3/d3/wiki/%E7%9F%A9%E5%BD%A2%E6%A0%91%E5%B8%83%E5%B1%80
https://treemapart.wordpress.com/
http://www.datavizcatalogue.com/methods/treemap.html

## word-cloud 比较

词云的简介
词云，又称文字云，是文本数据的视觉表示，由词汇组成类似云的彩色图形，用于展示大量文本数据。通常用于描述网站上的关键字元数据（标签），或可视化自由格式文本。 每个词的重要性以字体大小或颜色显示。 词云的作用：

快速感知最突出的文字
快速定位按字母顺序排列的文字中相对突出的部分

词云和柱状图
词云适合大量数据，柱状图适合少量数据
词云展示文字更为直观，柱状图需要借助坐标轴和刻度表示文字的分类和数据
词云可以映射更多分类字段在在文字样式上，柱状图只能映射一个分类字段在颜色上

**分布类 tag-distribute**

> 可视化的方法显示频率，数据分散在一个区间或分组。使用图形的位置、大小、颜色的渐变程度来表现数据的分布，通常用于展示连续数据上数值的分布情况。

## box 箱形

箱形图又称盒须图、盒式图或箱线图，是一种用作显示一组数据分布情况的统计图。

如果一个数据集中包含了一个分类变量和一个或者多个连续变量，那么你可能会想知道连续变量会如何随着分类变量水平的变化而变化，而箱形图就可以提供这种方法，它只用了 5 个数字对分布进行概括，即一组数据的最大值、最小值、中位数、下四分位数及上四分位数。对于数据集中的异常值，通常会以单独的点的形式绘制。箱形图可以水平或者垂直绘制。

箱形图多用于数值统计，虽然相比于直方图和密度曲线较原始简单，但是它不需要占据过多的画布空间，空间利用率高，非常适用于比较多组数据的分布情况。

从箱形图中我们可以观察到：

一组数据的关键值：中位数、最大值、最小值等。
数据集中是否存在异常值，以及异常值的具体数值。
数据是否是对称的。
这组数据的分布是否密集、集中。
数据是否扭曲，即是否有偏向性。
鸢 yuan 鸳 尾花

## bubble、colorMap 色块

## contour-line 等高线

等高线指的是地形图上高程相等的各点所连成的闭合曲线。在等高线上标注的数字为该等高线的海拔高度。等高线按其作用不同，可分为首曲线、计曲线、间曲线与助曲线四种。除地形图之外，等高线也见于俯视图、阴影图等形式。 等高线是通过连接地图上的海拔高度相同的点得到的。等高线一般不相交，但有时可能会重合。在同一等高线上的各点高度相同。在等高线稀疏的地方，坡度较缓；而在等高线稠密的地方，坡度较陡

等高线包含以下构成元素：

表示概率密度的线
图例
坐标轴
等高线的应用场景
适合等高线的场景

等高度线（等深度线）是最常见的等高线。将海拔高度相等的各点用曲线或折线连接就能得到等高度线。它一般能反映一片区域的整体地势情况。
等温度线（简称等温线）可以显示一个地区整体的温度范围分布。在等温度线稠密的地方，温差较大。
等气压线用于反映一个地区的气压分布与高低，可用于记录或预测台风。
等降水量线又叫等雨量线、等雨线，用于表示一定区域内降水的多少，主要用于气象学。

## distribution-curve 分布曲线

概率分布，同统计学紧密结合
分布曲线是一种对称的钟形曲线，具有均数等于 0，标准差等于 1 的特点，从而使标准分数在实际运用时非常有用。较常用的概率密度函数有：

核密度估计概率密度：核密度估计（kernel density estimation）是在概率论中用来估计未知的密度函数，属于非参数检验方法之一。由于核密度估计方法不利用有关数据分布的先验知识，对数据分布不附加任何假定，是一种从数据样本本身出发研究数据分布特征的方法，因而，在统计学理论和应用领域均受到高度的重视。下图展示了几种比较常用的核函数，图中展示的是钻石数据的 depth 属性分布曲线。

## dot-map 点描法地图 （分布、地图）

## heatMap

热力图是非常特殊的一种图，其使用场景通常比较有限。AntV 中所定义的热力图是两个连续数据分别映射到 x、y 轴。第三个连续数据映射到颜色，这个数据通常有两种获取途径办法：

从原始数据里取出相应数据字段，直接输入。
通过封箱和计数统计，得到区域数据密度元数据并映射到颜色。

注意以下几点：

热力图尤其关注分布。
热力图可以不需要坐标轴，其背景常常是图片或地图。
热力图一般情况用其专有的色系彩虹色系(rainbow)

例子 2: 数据的统计预测

下图表示的是克拉数和价格的关系。我们想通过已有的钻石数据，对未知区域的钻石数据进行预测。

说明：

carat（克拉数）字段映射到 x 轴，price（价格）字段映射到 y 轴，以确定位置
通过高斯密度统计函数，得到绘制区域内每个点的概率密度。
概率密度映射到颜色
鼠标悬浮图表到图表区域，能显示当前点所预测的概率密度数据

https://www.patrick-wied.at/static/heatmapjs/
https://en.wikipedia.org/wiki/Heat_map
http://datavlab.org/heatmap/

## scatter 散点

散点图也叫 X-Y 图，它将所有的数据以点的形式展现在直角坐标系上，以显示变量之间的相互影响程度，点的位置由变量的数值决定。

通过观察散点图上数据点的分布情况，我们可以推断出变量间的相关性。如果变量之间不存在相互关系，那么在散点图上就会表现为随机分布的离散的点，如果存在某种相关性，那么大部分的数据点就会相对密集并以某种趋势呈现。数据的相关关系主要分为：正相关（两个变量值同时增长）、负相关（一个变量值增加另一个变量值下降）、不相关、线性相关、指数相关等，表现在散点图上的大致分布如下图所示。那些离点集群较远的点我们称为离群点或者异常点。

散点图经常与回归线（就是最准确地贯穿所有点的线）结合使用，归纳分析现有数据以进行预测分析。

对于那些变量之间存在密切关系，但是这些关系又不像数学公式和物理公式那样能够精确表达的，散点图是一种很好的图形工具。但是在分析过程中需要注意，这两个变量之间的相关性并不等同于确定的因果关系，也可能需要考虑其他的影响因素。

英文名：Scatter graph, Point graph, X-Y plot, Scatter chart or Scattergram

https://en.wikipedia.org/wiki/Scatter_plot
http://www.psychwiki.com/wiki/What_is_a_scatterplot%3F
https://www.jianshu.com/p/6ed9082a52df

**流程类 tag-flow**

可视化的方法显示流程流转和流程流量。一般流程都会呈现出多个环节，每个环节之间会有相应的流量关系，这类图形可以很好的表示这些关系。

## sankey 桑基图

**占比类 proportion**
可视化的方法显示同一维度上占比关系

## donut 环

环图（又叫做甜甜圈图），其本质是饼图将中间区域挖空。
虽然如此，环图还是有它一点微小的优点。饼图的整体性太强，我们会将注意力集中在比较饼图内各个扇形之间占整体比重的关系。但如果我们将两个饼图放在一起，饼图很难同时对比两个图。

环图在解决上述问题时，采用了让我们更关注长度而不是面积的做法。这样我们就能相对简单的对比不同的环图。

同时环图相对于饼图空间的利用率更高，比如我们可以使用它的空心区域显示文本信息，比如标题等。

## Mosaic 马赛克

## pie

饼图广泛得应用在各个领域，用于表示不同分类的占比情况，通过弧度大小来对比各种分类。饼图通过将一个圆饼按照分类的占比划分成多个区块，整个圆饼代表数据的总量，每个区块（圆弧）表示该分类占总体的比例大小，所有区块（圆弧）的加和等于 100%。

饼图可以很好地帮助用户快速了解数据的占比分配。它的主要缺点是：

饼图不适用于多分类的数据，原则上一张饼图不可多于 9 个分类，因为随着分类的增多，每个切片就会变小，最后导致大小区分不明显，每个切片看上去都差不多大小，这样对于数据的对比是没有什么意义的。所以饼图不适合用于数据量大且分类很多的场景。
相比于具备同样功能的其他图表（比如百分比柱状图、环图），饼图需要占据更大的画布空间。
很难进行多个饼图之间的数值比较。

不适合的场景
例子 1：分类过多的场景

下图是各个省的人口的占比情况，因为这张图上包含的分类过多，就出现了简介中提到的问题，很难清晰对比各个省份的人口数据占比情况，所以这种情况下，我们推荐使用横向柱状图。

## stacked-area,stacked-column,tree-map

**区间 range**
可视化的方法显示同一维度上值的上限和下限之间的差异。 使用图形的大小和位置表示数值的上限和下限，通常用于表示数据在某一个分类（时间点）上的最大值和最小值。

## gauge 仪表盘

仪表盘(Gauge)是一种拟物化的图表，刻度表示度量，指针表示维度，指针角度表示数值。仪表盘图表就像汽车的速度表一样，有一个圆形的表盘及相应的刻度，有一个指针指向当前数值。目前很多的管理报表或报告上都是用这种图表，以直观的表现出某个指标的进度或实际情况。

仪表盘的好处在于它能跟人们的常识结合，使大家马上能理解看什么、怎么看。拟物化的方式使图标变得更友好更人性化，正确使用可以提升用户体验。

仪表盘的圆形结构，可以更有效的利用空间。

为了视觉上的不拥挤且符合常识，我们建议指针的数量不超过 3 根。

## stacked-area

**relation 关联（系）**

可视化的方法显示数据之间相互关系。 使用图形的嵌套和位置表示数据之间的关系，通常用于表示数据之间的前后顺序、父子关系以及相关性。

## art 弧长链接图

弧长链接图是节点－链接法的一个变种，节点－链接法是指用节点表示对象，用线（或边）表示关系的节点－链接布局(node-link)的一种可视化布局表示。弧长链接图在此概念的基础上，采用一维布局方式，即节点沿某个线性轴或环状排列，用圆弧表达节点之间的链接关系。这种方法不能像二维布局那样表达图的全局结构，但在节点良好排序后可清晰的呈现环和桥的结构。

适合的场景： 表达数据之间的关系，以及关系的重要性
例子 1: 下图这个网络代表了维克多·雨果的经典小说“LesMisérables”中的人物关系

节点数据
name group id
Myriel 1 0
... ... ...
链接数据
source target value
1 0 1
... ... ...

弧长链接图和和弦图
弧长链接图的节点使用标准线性布局，节点权重决定节点大小但不影响位置
弧长链接图的连线可以使用权重控制线宽，粗细均匀。
弧长链接图的连线重叠绘制在节点上
和弦图的节点使用权重线性布局，节点权重即决定节点大小，又决定节点位置
和弦图的连线使用源权重和目标权重控制线宽，粗细非均匀
和弦图的节点宽度为连线宽度之和，节点处的连线平铺不重叠
英文名：Arc Diagram

说明：

group 字段，使用了颜色用于区分不同的节点类型
例子 2：使用极坐标系可以将 例 1 的数据绘制成环形弧长链接图

## chord 和弦

和弦图(chord Diagram)，是一种显示矩阵中数据间相互关系的可视化方法，节点数据沿圆周径向排列，节点之间使用带权重（有宽度）的弧线链接。

图表类型 和弦图
适合的数据 节点数据集（可选），边数据集
功能 观察节点关系
数据与图形的映射 权重映射到节点和边的宽度
适合的数据条数 节点数据两组以上
和弦图的应用场景
和弦图用于探索实体组之间的关系。 它们被生物科学界广泛用于可视化基因数据，在 Wired，New York Times 和 American Scientist 等刊物上也被称为信息图表(info graphics)。其他应用场景如下：

例子 1：展示层次结构中的依赖关系

例如在软件类层次结构中的类存在复杂的依赖关系，根据源和目标包进行分组，然后根据依赖的程度使用带宽度的边连接具有依赖关系的节点，下图每个节点表示一个独立的包，每条边展示了包与包之间的依赖关系，每个节点上边的数量展示了当前包依赖的目标包的数量，边的初始宽度展示了当前包的类依赖目标包的类的数量，边的结束宽度展示了目标包的类依赖当前包的类的数量，也就是说，当一条边的结束宽度不为 0 时，表示包之间有循环依赖，在图表中表现为节点上连接了颜色与节点不同的边，例如图中左下角的 vis.data 与 vis.event。数据来源：[d3](http://bl.ocks.org/mbostock/raw/1046712/0e8c66400c2db4aacc99f935fbb480e2d77fbe19/readme.json)

例 2：展示同级实体之间的流通关系 下图展示了某个时段用户使用 uber 软件在美国旧金山各个城市之间乘车交通的情况，图中的节点表示城市，节点大小表示了交通流量的多少，从图中可以看出，交通行为主要发生在 SoMa、Downtown、Financial District、Mission、Marina 和 Western Addition 六个城市。边连接了有交通行为的两个城市，节点上边的条数表示与当前城市有交通行为的城市的数量，边的初始宽度表示从当前城市到目标城市的流通量，边的结束宽度表示从目标城市到当前城市的流通量，从图中可以看出，从 SoMa 到 Financial District 的流量最大，数据来源：[uberdata](https://twitter.com/uberdata)

## Venn

韦恩图简介
维恩图(Venn)，也叫温氏图、维恩图、范氏图，用于显示元素集合重叠区域的图表。

维恩图是关系型图表，通过图形与图形之间的层叠关系，来表示集合与集合之间的相交关系。

韦恩图的构成

一个完整的韦恩图包含以下构成元素：

若干个圆表示集合。
若干个圆层叠部分表示公有集合。
内部文本标签。

适合韦恩图的场景
适合场景 1：表示 2 个集合相交关系
场景说明：有一个集合 A，有一个集合 B，相交集合为 C。
数据说明：2 个维度数据，分类数据映射集合名，关系数据映射集合关系。

适合场景 2：表示 3 个集合相交关系
场景说明：有集合 A、B、C。
数据说明：2 个维度数据，分类数据映射集合名，关系数据映射集合关系。

适合场景 2：表示 4 个集合相交关系
场景说明：有一个集合 A、B、C、D。
数据说明：2 个维度数据，分类数据映射集合名，关系数据映射集合关系。

不适合韦恩图的场景
超过五个集合的场景，不适合适用韦恩图。
韦恩图与其他图表的对比
韦恩图与树状图
韦恩图是利用图形与图形间的层叠关系描述集合关系，侧重于表示相交关系。
树状图是利用图形与图形间的分叉关系描述集合关系，侧重于表示从属关系。

韦恩图 维基百科 https://zh.wikipedia.org/wiki/%E6%96%87%E6%B0%8F%E5%9B%BE

**trend**
趋势类
可视化的方法分析数据的变化趋势。使用图形的位置表现出数据在连续区域上的分布，通常展示数据在连续区域上的大小变化的规律。

## area(趋势、时间类)

面积图又叫区域图。 它是在折线图的基础之上形成的, 它将折线图中折线与自变量坐标轴之间的区域使用颜色或者纹理填充，这样一个填充区域我们叫做面积，颜色的填充可以更好的突出趋势信息，需要注意的是颜色要带有一定的透明度，透明度可以很好的帮助使用者观察不同序列之间的重叠关系，没有透明度的面积会导致不同序列之间相互遮盖减少可以被观察到的信息。

和折线图一样，面积图也用于强调数量随时间而变化的程度，也可用于引起人们对总值趋势的注意。他们最常用于表现趋势和关系,而不是传达特定的值。

面积图有两种常用的类型：

一般面积图：所有的数据都从相同的零轴开始。
层叠面积图：每一个数据集的起点不同，都是基于前一个数据集。用于显示每个数值所占大小随时间或类别变化的趋势线，堆叠起来的面积图在表现大数据的总量分量的变化情况时格外有用。另外还有百分比层叠面积图，用于显示每个数值所占百分比随时间或类别变化的趋势线。可强调每个系列的比例趋势线。

面积图与其他图表的对比
面积图和折线图
面积图和折线图都是展示时间或者连续数据上的趋势，折线图相互之间不进行遮盖，可以用于显示更多的记录。
面积图可以进行层叠，非常适合观察总量和分量的变化。
面积图和柱状图
面积图主要展示时间或者连续数据上的趋势，柱状图主要展示的是分类数据的对比。
面积图和柱状图都可以进行层叠，都可以观察总量和分量的变化，观察各个分量的占比。

## kagi 卡吉图

不适合的场景
对时间敏感的数据

卡吉图与时间无关，只表示数据上升下降的走势，无法体现数据再时间上的一些特性，例如周期等。特别时当数据对时间敏感时不推荐用卡吉图 下图使用卡吉图绘制了 G2 官网 2016 年 5 月 13 日至 2016 年 10 月 28 日的日浏览次数，从图中可以看出两次访问量较高的转折线，但无法确定其具体时间点，也无法看出数据的周期性，周期性数据推荐使用螺旋图

## line

折线图的简介
折线图用于显示数据在一个连续的时间间隔或者时间跨度上的变化，它的特点是反映事物随时间或有序类别而变化的趋势。

在折线图中，数据是递增还是递减、增减的速率、增减的规律（周期性、螺旋性等）、峰值等特征都可以清晰地反映出来。所以，折线图常用来分析数据随时间的变化趋势，也可用来分析多组数据随时间变化的相互作用和相互影响。例如可用来分析某类商品或是某几类相关的商品随时间变化的销售情况，从而进一步预测未来的销售情况。在折线图中，一般水平轴（X 轴）用来表示时间的推移，并且间隔相同；而垂直轴（Y 轴）代表不同时刻的数据的大小。

英文名：Line Chart

折线图的构成

图表类型 折线图
适合的数据 两个连续字段数据，或者一个有序的分类一个连续数据字段
功能 观察数据的变化趋势
数据与图形的映射 两个连续字段分别映射到横轴和纵轴
适合的数据条数 单条线的数据记录数要大于 2，但是同一个图上不要超过 5 条折线
一个折线图的构成包括：

横轴：表示时间
纵轴：表示数值
点：表示各个数据的位置
线：连接各个数据点
折线图的应用场景
适合的场景
例子 1：有序的因变量，比如：时间。

下图是某监控系统的折线图表，显示了请求次数和响应时间随时间的变化趋势。

横轴表示时间，因为需要同时展示请求次数和响应时间这两组数据，所以添加了两个垂直坐标轴。折线图可以很好地表现数据递减、增减的速率、增减的规律、峰值等特征。

time（时间） requestCount（请求次数） avgRt（响应时间）
9:00 32215.0 45207.51
9:05 29422.0 32978.0

折线图的扩展
为了视觉的美观可以将折线转换成平滑曲线

折线图与其他图表的对比
折线图和柱状图
柱状图主要用于多个分类间的数据（大小、数量）的对比，折线图主要用于时间或者连续数据上的趋势。
分类间的数据比较，如果分类不存在顺序，那么不要使用折线图。
折线图和面积图
折线图和面积图都可以表示一段时间（或者有序分类）的趋势，相比之下面积图的表现力更强一些
面积图还可以表示数据的上下限，例如可以表示温度的最小值、最大值

## regression-curve 回归曲线图

回归曲线图的简介
回归曲线图同统计学紧密结合，属于探索型图表，通过对样本数据进行曲线回归（非线性回归）确定两个变数间数量变化的某种特定的规则或规律。我们称图中的线为回归曲线，是最准确地贯穿图中的各个点的线，分为线性回归和非线性回归。

回归曲线图用于回归分析，其主要内容是通过试验或观测数据，寻找相关变量之间的统计规律性，再利用自变量的值有效预测因变量的可能取值。

回归曲线图的构成

图表类型 回归曲线图
适合的数据 两个连续字段
功能 观察数据的变化趋势
根据样本点预测数据
数据与图形的映射 两个连续字段的分布特征元数据映射到回归线
适合的数据条数 暂无限制

## stacked-area

**tag-time**

**tag-location**
地图类
可视化的方法显示地理区域上的数据。使用地图作为背景，通过图形的位置来表现数据的地理位置，通常来展示数据在不同地理区域上的分布情况。

## bubble-map

带气泡的地图，其实就是气泡图和地图的结合，我们以地图为背景，在上面绘制气泡。我们将圆（这里我们叫它气泡）展示在一个指定的地理区域内，气泡的面积代表了这个数据的大小。

Bubble Map 比分级统计图更适用于比较带地理信息的数据的大小。它的主要缺点是当地图上的气泡过多过大时，气泡间会相互遮盖而影响数据展示，所以在绘制时需要考虑这点。

英文名： Bubble Map
适合的数据 一个分类字段，一个连续字段
功能 对比分类数据的数值大小
数据与图形的映射 一个分类字段映射到地图的地理位置和气泡颜色
另一个连续字段映射到气泡大小
适合的数据条数 根据实际地理位置信息，暂无限制

当数值字段表达的不是一个区域的总值，而仅仅是个取样值(气温、降水等）时不适合使用带气泡的地图

不适合的原因：

气泡相互折叠
气温是一个采样数值，有连续性
温度的变化不大，导致气泡的大小变化不大，无法明确的对比数值的大小
此时更适合热力图

带气泡的地图同其他图表的对比
跟一般气泡图的对比
带气泡的地图是一种特殊的气泡图，都可以表示三个维度的数据关系
一般的气泡图，两个维度映射到 x,y 轴这两个维度的字段类型和含义没有限制，可以是分类也可以是连续；但是带气泡的地图，映射到两个轴上的坐标只能是经纬度，用于表示地理位置，如果是地址名称需要先转换成经纬度
跟分级统计图的对比
分级统计图是将某个区域染成一定的颜色，跟带气泡的地图同样是表示一个区域的某个值的大小
分级统计图仅能用颜色深度表示数值的大小，而带气泡的地图除了气泡的大小外，气泡的颜色也可以表示数值的大小

## choropleth-map

分级统计地图的简介
分级统计地图是一种在地图分区上使用视觉符号（通常是颜色、阴影或者不同疏密的晕线）来表示一个范围值的分布情况的地图。在整个制图区域的若干个小的区划单元内（行政区划或者其他区划单位），根据各分区的数量（相对）指标进行分级，并用相应色级或不同疏密的晕线，反映各区现象的集中程度或发展水平的分布差别，最常见于选举和人口普查数据的可视化，这些数据以省、市登地理区域为单位。

此法因常用色级表示，所以也叫色级统计图法。地图上每个分区的数量使用不同的色级表示，较典型的方法有：（1）一个颜色到另一个颜色混合渐变；（2）单一的色调渐变；（3）透明到不透明；（4）明到暗；（5）用一个完整的色谱变化。Choropleth 地图依靠颜色等来表现数据内在的模式，因此选择合适的颜色非常重要，当数据的值域大或者数据的类型多样时，选择合适的颜色映射相当有挑战性。

Choropleth 地图最大的问题在于数据分布和地理区域大小的不对称。通常大量数据集中于人口密集的区域，而人口稀疏的地区却占有大多数的屏幕空间，用大量的屏幕空间来表示小部分数据的做法对空间的利用非常不经济，这种不对称还常常会造成用户对数据的错误理解，不能很好地帮助用户准确得区分和比较地图上各个分区的数据值。

英文名：Choropleth Map

分级统计地图的构成

分级统计地图与带气泡的地图
分级统计地图与带气泡的地图都用于显示地理区域上的值。分级统计地图将数值映射到地图区域的颜色上，带气泡的地图在地图区域上显示一个气泡，气泡的大小表示数值的大小
分级统计地图经常会带来误判，面积大的区域可能数值（人口数、选举人票等）比较小
分级统计地图与点描法地图
点描法地图主要用于显示某个经纬度上的数据，而分级统计地图用于显示某个区域的统计值
点描法地图可以显示大量的数据值，而分级统计地图受显示区域的限制

## dot-map

点描法地图
有两种类型的点描法地图：

一对一，即一个点只代表一个数据或者对象，因为点的位置对应只有一个数据，因此必须保证点位于正确的空间地理位置。
一对多，即一个点代表的是一个特殊的单元，这个时候需要注意不能将点理解为实际的位置，这里的点代表聚合数据，往往是任意放置在地图上的.
点描法地图是观察对象在地理空间上分布情况的理想方法，记住在地图上的形成的点集群可以显示一些数据模式。借助点描法地图，可以很方便得掌握数据的总体分布情况，但是当需要观察单个具体的数据的时候，它是不太适合的。

英文名：Dot Map, Dot Distribution Map, Dot Density Map

例子 2： 2010 年芝加哥人口种族分布

用不同颜色的点在地图上标识不同的种族，粉红色表示白人，蓝色表示黑人，绿色表示亚洲人，黄色表示拉丁美洲人，这一种族分布地图清晰地表现了黑人和白人的聚居区，中部偏右还有一小块绿色的亚裔聚居区，在聚居区交接的区域通常存在不同种族混居的现象。

注意，这张图中由于数据点很多，正常情况下当数据中有海量的点数据需要在地图上标识时，点之间会产生大量重叠的情况，而这张图采用了类似于 PixelMap 的算法，将重叠的点再一个目标位置周围的小范围内随机移动，从而解决重叠的问题，让可视化展示更多的细节。

不适合的场景
汇总值在地图上的分布和对比，用点描法地图不太合适，最好采用气泡图结合地图来展示，气泡的大小作为一个维度可以显示出汇总值的分布和对比情况。

## Line49 色板

## 交互 interact

# books

蚂蚁 AndV 的设计师喜欢看的几个书：唐纳德·A·诺曼的《设计心理学》、《About Face 4: 交互设计精髓》、《Designing Interfaces》

咱们代码中直接用的是 Antv Design Charts，基于 G2Plot，基于 G2，基于 G

**路径和线（path&&line）** 支持的视觉通道>color
**区域图 area** 支持的视觉通道>color
**点图 point** 。。
**区间图 interval**
**多边形 polygon**
algolia
一定要熟悉 g2 的所有公共配置。
