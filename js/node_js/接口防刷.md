
如何做到接口防刷
因为之前做的是抽奖系统，接口防刷是非常必要的，也是高并发下的经典场景
其中的一些知识点，已经超过了前端的范畴，不过技不压身，多了解一些总是没错的
1）第一步：负载均衡层的限流，防止用户重复抽奖
在负载均衡设备中做一些配置，判断如果同一个用户在1分钟之内多次发送请求来进行抽奖，就认为是恶意重复抽奖，或者是他们自己写的脚本在刷
这种流量一律认为是无效流量，在负载均衡设备那个层次就给直接屏蔽掉。
所以这里就可以把无效流量给拦截掉
2）第二步：暴力拦截流量
其实秒杀、抢红包、抽奖，这类系统有一个共同的特点，那就是假设有50万请求涌入进来，可能前5万请求就直接把事儿干完了，甚至是前500请求就把事儿干完了
后续的几十万流量是无效的，不需要让他们进入后台系统执行业务逻辑了
这样的话，其实在负载均衡这一层（可以考虑用Nginx之类的来实现）就可以拦截掉99%的无效流量
3）第三步：ip或用户抽奖次数校验
建立一个抽奖表，该表记录所有参与抽奖的ip和用户信息，比如判断5s内，该用户连续抽奖了2次以上，就拒绝该请求，认为是在刷接口，就把该用户和ip加入黑名单


作者：海阔_天空
链接：https://juejin.cn/post/7146996646394462239
来源：稀土掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。

https://juejin.cn/post/6844903847031226382: 如何设计一个百万级用户的抽奖系统？
