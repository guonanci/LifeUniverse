
csrf 跨站请求伪造

csrf的攻击原理：
诱导受害者进入钓鱼网站，在钓鱼网站中利用你在被攻击网站已登录的凭证（凭证存在cookie中），冒充用户发送恶意请求，这些请求因为携带有用户的登录信息，会被服务器当做正常的请求处理，从而使你的个人隐私泄露或财产损失。

csrf的攻击过程：
1）受害者登录A站点，并保留了登录凭证（Cookie）
2）攻击者诱导受害者访问了站点B
3）站点B向站点A发送了一个请求，浏览器会默认携带站点A的Cookie信息
4）站点A接收到请求后，对请求进行验证，并确认是受害者的凭证，误以为是受害者发送的请求
5）站点A以受害者的名义执行了站点B的请求，攻击完成，攻击者在受害者不知情的情况下，冒充受害者完成了攻击。

csrf的攻击的必要条件：
1）用户已登录过某网站，并且没有退出，登录信息存储在cookie中（发送请求时，浏览器会自动在请求头上带上要请求域名的cookie）
2）在不登出A的情况下，访问危险网站B

CSRF如何防御

1）根据攻击的原理可以看出，csrf通常是跨域请求（从钓鱼网站B发送请求网站A的请求），请求头上的Referer或origin字段可以判断请求的来源，如果服务器判断请求的域名不在白名单中，就拒绝对应的请求
2）添加token验证
CSRF攻击之所以能够成功，是因为用户验证信息都存在cookie中，攻击者可以完全伪造用户的请求。从请求头或请求参数中添加用户的token用来验证用户，如果请求没有或token不对，就拒绝对应的请求
3）验证码
对于转账或支付的环节，强制用户必须与应用进行交互，才能完成最终请求

前端安全系列（二）：如何防止CSRF攻击？
WEB安全之-CSRF（跨站请求伪造）


作者：海阔_天空
链接：https://juejin.cn/post/7146996646394462239
来源：稀土掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
